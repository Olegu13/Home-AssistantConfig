<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.5" />
<title>wiserHeatingAPI.wiserHub API documentation</title>
<meta name="description" content="Wiser API Facade â€¦" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>wiserHeatingAPI.wiserHub</code></h1>
</header>
<section id="section-intro">
<h1 id="wiser-api-facade">Wiser API Facade</h1>
<p>Angelosantagata@gmail.com</p>
<p><a href="https://github.com/asantaga/wiserheatingapi">https://github.com/asantaga/wiserheatingapi</a></p>
<p>This API Facade allows you to communicate with your wiserhub.
This API is used by the homeassistant integration available at
<a href="https://github.com/asantaga/wiserHomeAssistantPlatform">https://github.com/asantaga/wiserHomeAssistantPlatform</a></p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
# Wiser API Facade

Angelosantagata@gmail.com


https://github.com/asantaga/wiserheatingapi


This API Facade allows you to communicate with your wiserhub.
This API is used by the homeassistant integration available at
https://github.com/asantaga/wiserHomeAssistantPlatform
&#34;&#34;&#34;

import logging
import requests
import json
import os
import re

_LOGGER = logging.getLogger(__name__)

&#34;&#34;&#34;
Wiser Data URLS
&#34;&#34;&#34;
WISERHUBURL = &#34;http://{}/data/domain/&#34;
WISERNETWORKURL =  &#34;http://{}/data/network/&#34;
WISERMODEURL = &#34;http://{}/data/domain/System/RequestOverride&#34;
WISERSETROOMTEMP = &#34;http://{}//data/domain/Room/{}&#34;
WISERROOM = &#34;http://{}//data/domain/Room/{}&#34;
WISERSCHEDULEURL = &#34;http://{}/data/domain/Schedule/{}&#34;
WISERSMARTPLUGURL = &#34;http://{}/data/domain/SmartPlug/{}&#34;
WISERSMARTPLUGSURL = &#34;http://{}/data/domain/SmartPlug&#34;

TEMP_MINIMUM = 5
TEMP_MAXIMUM = 30
TEMP_OFF = -20

TIMEOUT = 5

__VERSION__ = &#34;1.0.3&#34;

&#34;&#34;&#34;
Exception Handlers
&#34;&#34;&#34;


class Error(Exception):
    &#34;&#34;&#34;Base class for exceptions in this module.&#34;&#34;&#34;
    pass


class WiserNoDevicesFound(Error):
    pass


class WiserNotFound(Error):
    pass


class WiserNoRoomsFound(Error):
    pass


class WiserNoHotWaterFound(Error):
    pass


class WiserNoHeatingFound(Error):
    pass


class WiserRESTException(Error):
    pass


class WiserHubDataNull(Error):
    _LOGGER.info(&#34;WiserHub data null after refresh&#34;)
    pass

class WiserHubAuthenticationException(Error):
    pass

class WiserHubTimeoutException(Error):
    pass


class wiserHub:

    def __init__(self, hubIP, secret):
        _LOGGER.info(
            &#34;WiserHub API Initialised : Version {}&#34;.format(__VERSION__))
        self.wiserHubData = None
        self.wiserNetworkData = None
        self.hubIP = hubIP
        self.hubSecret = secret
        self.headers = {&#39;SECRET&#39;: self.hubSecret,
                        &#39;Content-Type&#39;: &#39;application/json;charset=UTF-8&#39;}
        # Dict holding Valve2Room mapping convinience variable
        self.device2roomMap = {}
        self.refreshData()  # Issue first refresh in init

    def __toWiserTemp(self, temp):
        &#34;&#34;&#34;
        Converts from temperature to wiser hub format
        param temp: The temperature to convert
        return: Integer
        &#34;&#34;&#34;
        temp = int(temp * 10)
        return temp

    def __fromWiserTemp(self, temp):
        &#34;&#34;&#34;
        Conerts from wiser hub temperature format to decimal value
        param temp: The wiser temperature to convert
        return: Float
        &#34;&#34;&#34;
        temp = round(temp / 10, 1)
        return temp

    def __checkTempRange(self, temp):
        &#34;&#34;&#34;
        Validates temperatures are within the allowed range for the wiser hub
        param temp: The temperature to check
        return: Boolean
        &#34;&#34;&#34;
        if temp != TEMP_OFF and (temp &lt; TEMP_MINIMUM or temp &gt; TEMP_MAXIMUM):
            return False
        else:
            return True

    def checkHubData(self):
        &#34;&#34;&#34;
        Method checks the hub data object is populated, if it is not then it
        executes the refresh method, if the hubdata object is still null then
        it raises an error

        &#34;&#34;&#34;
        if self.wiserHubData is None:
            self.refreshData()
        if self.wiserHubData is None:
            raise WiserHubDataNull(
                &#34;Hub data null even after refresh, aborting request&#34;)
        # Otherwise continue

    def refreshData(self):
        &#34;&#34;&#34;
        Forces a refresh of data from the wiser hub
        return: JSON Data
        &#34;&#34;&#34;

        _LOGGER.info(&#34;Updating Wiser Hub Data&#34;)
        try:
            resp = requests.get(WISERHUBURL.format(
                self.hubIP), headers=self.headers, timeout=TIMEOUT)
                
            resp.raise_for_status()
            self.wiserHubData = resp.json()
            
            _LOGGER.debug(
                &#34;Wiser Hub Data received {} &#34;.format(self.wiserHubData))
            if self.getRooms() is not None:
                for room in self.getRooms():
                    roomStatId = room.get(&#34;RoomStatId&#34;)
                    if roomStatId is not None:
                        # RoomStat found add it to the list
                        self.device2roomMap[roomStatId] = {
                            &#34;roomId&#34;: room.get(&#34;id&#34;),
                            &#34;roomName&#34;: room.get(&#34;Name&#34;)}
                    smartValves = room.get(&#34;SmartValveIds&#34;)
                    if smartValves is not None:
                        for valveId in smartValves:
                            self.device2roomMap[valveId] = {
                                &#34;roomId&#34;: room.get(&#34;id&#34;),
                                &#34;roomName&#34;: room.get(&#34;Name&#34;)}
                    # Show warning if room contains no devices.
                    if roomStatId is None and smartValves is None:
                        # No devices in room
                        _LOGGER.warning(
                            &#34;Room {} doesn&#39;t contain any smart valves or thermostats.&#34;.format(
                                room.get(&#34;Name&#34;)))
                _LOGGER.debug(&#34; valve2roomMap{} &#34;.format(self.device2roomMap))
            else:
                _LOGGER.warning(&#34;Wiser found no rooms&#34;)

            # The Wiser Heat Hub can return invalid JSON, so remove all non-printable characters before trying to parse JSON
            responseContent = requests.get(WISERNETWORKURL.format(self.hubIP), headers=self.headers, timeout=TIMEOUT).content
            responseContent = re.sub(rb&#39;[^\x20-\x7F]+&#39;, b&#39;&#39;, responseContent)
            self.WiserNetworkData = json.loads(responseContent)

        except requests.Timeout:
            _LOGGER.debug(
                &#34;Connection timed out trying to update from Wiser Hub&#34;)
            raise WiserHubTimeoutException(&#34;The connection timed out.&#34;)
        except requests.HTTPError:
            if self.wiserHubData.status_code == 401:
                raise WiserHubAuthenticationException(&#34;Authentication error.  Check secret key.&#34;)
            elif self.wiserHubData.status_code == 404:
                raise WiserRESTException(&#34;Not Found.&#34;)
            else:
                raise WiserRESTException(&#34;Unknown Error.&#34;)
        except requests.ConnectionError:
            _LOGGER.debug(&#34;Connection error trying to update from Wiser Hub&#34;)
        return self.wiserHubData

    def getHubData(self):
        &#34;&#34;&#34;
        Retrieves the full JSON payload ,
        for functions where I haven&#39;t provided a API yet

        returns : JSON Data
        &#34;&#34;&#34;
        self.checkHubData()
        return self.wiserHubData

    def getWiserHubName(self):
        return self.wiserNetworkData.get(&#34;Station&#34;).get(&#34;MdnsHostname&#34;)
        
    def getMACAddress(self):
        return self.wiserNetworkData.get(&#34;Station&#34;).get(&#34;MacAddress&#34;)
        
    def getRooms(self):
        &#34;&#34;&#34;
        Gets Room Data as JSON Payload
        &#34;&#34;&#34;
        self.checkHubData()
        return self.wiserHubData.get(&#34;Room&#34;)

    def getRoom(self, roomId):
        &#34;&#34;&#34;
        Convinience to get data on a single room

        param roomId: The roomID
        return:
        &#34;&#34;&#34;
        self.checkHubData()
        if self.wiserHubData.get(&#34;Room&#34;) is None:
            _LOGGER.warning(&#34;getRoom called but no rooms found&#34;)
            raise WiserNoRoomsFound(&#34;No rooms found in Wiser payload&#34;)
        for room in (self.wiserHubData.get(&#34;Room&#34;)):
            if room.get(&#34;id&#34;) == roomId:
                return room
        raise WiserNotFound(&#34;Room {} not found&#34;.format(roomId))

    def getSystem(self):
        &#34;&#34;&#34;
        Convinience function to get system information

        return: JSON with system data
        &#34;&#34;&#34;
        self.checkHubData()
        return self.wiserHubData.get(&#34;System&#34;)

    def getHotwater(self):
        &#34;&#34;&#34;
        Convinience function to get hotwater data

        return: JSON with hotwater data

        &#34;&#34;&#34;
        self.checkHubData()
        return self.wiserHubData.get(&#34;HotWater&#34;)

    def getHeatingChannels(self):
        &#34;&#34;&#34;
        Convinience function to get heating channel data

        return: JSON data
        &#34;&#34;&#34;
        self.checkHubData()
        return self.wiserHubData.get(&#34;HeatingChannel&#34;)

    def getDevices(self):
        &#34;&#34;&#34;
        Convinience function to get devices data

        return: JSON data
        &#34;&#34;&#34;
        self.checkHubData()

        return self.wiserHubData.get(&#34;Device&#34;)

    def getDevice(self, deviceId):
        &#34;&#34;&#34;
        Get single devices data

        param deviceId:
        return: Device JSON Data
        &#34;&#34;&#34;
        self.checkHubData()

        if self.wiserHubData.get(&#34;Device&#34;) is None:
            _LOGGER.warning(&#34;getRoom called but no rooms found&#34;)
            raise WiserNoRoomsFound(&#34;getRoom called but no rooms found&#34;)
        for device in (self.wiserHubData.get(&#34;Device&#34;)):
            if device.get(&#34;id&#34;) == deviceId:
                return device
        raise WiserNotFound(&#34;Device {} not found &#34;.format(deviceId))

    def getDeviceRoom(self, deviceId):
        &#34;&#34;&#34;
        Convinience function to return the name of a room which is associated
        with a device (roomstat or trf)
        param deviceId:
        return: Name of Room associated with a device ID
        &#34;&#34;&#34;
        self.checkHubData()
        _LOGGER.debug(&#34; getDeviceRoom called, valve2roomMap is {} &#34;.format(
            self.device2roomMap))
        if not self.device2roomMap:
            self.refreshData()
        # This will return None if no device found, thats ok
        return self.device2roomMap[deviceId]

    def getHeatingRelayStatus(self):
        &#34;&#34;&#34;
        Returns heating relay status
        return:  On or Off
        &#34;&#34;&#34;
        # self.checkHubData()
        heatingRelayStatus = &#34;Off&#34;
        # There could be multiple heating channels, 
        heatingChannels = self.getHeatingChannels()
        for heatingChannel in heatingChannels:
            if heatingChannel.get(&#34;HeatingRelayState&#34;) == &#34;On&#34;:
                heatingRelayStatus = &#34;On&#34;
        return heatingRelayStatus

    def getHotwaterRelayStatus(self):
        &#34;&#34;&#34;
         Returns hotwater relay status
        return:  On or Off

        &#34;&#34;&#34;
        self.checkHubData()
        &#34;&#34;&#34;
        If there is no hotwater object then return false
        &#34;&#34;&#34;
        if len(self.wiserHubData.get(&#34;HotWater&#34;)) &lt; 1:
            return False

        return self.wiserHubData.get(&#34;HotWater&#34;)[0].get(&#34;WaterHeatingState&#34;)

    def setHotwaterMode(self, mode):
        &#34;&#34;&#34;
          Switch Hot Water on or off manually, or reset to &#39;Auto&#39; (schedule).
          &#39;mode&#39; can be &#34;on&#34;, &#34;off&#34; or &#34;auto&#34;.
        &#34;&#34;&#34;

        # Wiser requires a temperature when patching the Hot Water state,
        # reflecting &#39;on&#39; or &#39;off&#39;
        DHWOnTemp = 1100
        DHWOffTemp = -200

        modeMapping = {
            &#39;on&#39;: {
                &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;, &#34;SetPoint&#34;: DHWOnTemp}},
            &#39;off&#39;: {
                &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;, &#34;SetPoint&#34;: DHWOffTemp}},
            &#39;auto&#39;: {&#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;None&#34;, &#34;Mode&#34;: &#34;Auto&#34;}},
        }

        _mode = mode.lower()
        if _mode not in [&#39;on&#39;, &#39;off&#39;, &#39;auto&#39;]:
            raise ValueError(
                &#34;Hot Water can be either &#39;on&#39;, &#39;off&#39; or &#39;auto&#39; - not &#39;%s&#39;&#34; % _mode)

        # Obtain our DHW control ID
        if self.wiserHubData is None:
            self.refreshData()
        DHWId = self.wiserHubData.get(&#34;HotWater&#34;)[0].get(&#34;id&#34;)

        _url = WISERHUBURL.format(self.hubIP) + &#34;/HotWater/{}/&#34;.format(DHWId)
        _LOGGER.debug(&#34;Sending Patch Data: {}, to URL [{}]&#34;.format(
            modeMapping.get(_mode), _url))
        response = requests.patch(url=_url, headers=self.headers,
                                       json=modeMapping.get(_mode))
        if response.status_code != 200:
            _LOGGER.debug(
                &#34;Set DHW Response code = {}&#34;.format(response.status_code))
            raise WiserRESTException(
                &#34;Error setting hot water mode to {}, error {} {}&#34;.
                    format(_mode, response.status_code, response.text))

        return True

    def setSystemSwitch(self, switch, mode=False):
        &#34;&#34;&#34;
        Sets a system switch. For details of which switches to set look at the System section of the payload from the wiserhub
        :param switch: Name of Switch
        :param mode: Value of mode
        :return:
        &#34;&#34;&#34;
        patchData = {switch: mode}
        url = WISERHUBURL + &#34;System&#34;

        _LOGGER.debug(&#34;patchdata {} &#34;.format(patchData))
        response = requests.patch(url=url.format(self.hubIP),
                                       headers=self.headers,
                                       json=patchData, timeout=TIMEOUT)
        if response.status_code != 200:
            _LOGGER.debug(&#34;Set {} Response code = {}&#34;.format(switch,
                                                             response.status_code))
            raise WiserRESTException(
                &#34;Error setting {} , error {} {}&#34;.format(switch,
                                                        response.status_code,
                                                        response.text))

    def getRoomStatData(self, deviceId):
        &#34;&#34;&#34;
        Gets Room Thermostats Data

        param deviceId:
        return:
        &#34;&#34;&#34;
        self.checkHubData()

        if self.wiserHubData[&#39;RoomStat&#39;] is None:
            _LOGGER.warning(&#34;getRoomStatData called but no RoomStats found&#34;)
            raise WiserNotFound(&#34;deviceID {} not found &#34;.format(deviceId))

        for roomStat in self.wiserHubData[&#39;RoomStat&#39;]:
            if roomStat.get(&#34;id&#34;) == deviceId:
                return roomStat
        &#34;&#34;&#34;
        If we get here then the deviceId was not found
        &#34;&#34;&#34;
        raise WiserNotFound(
            &#34;getRoomStatData for deviceID {} not found due&#34;.format(deviceId))

    def getRoomSchedule(self, roomId):
        &#34;&#34;&#34;
        Gets Room Schedule Data
        
        param roomId:
        return: json data
        &#34;&#34;&#34;
        self.checkHubData()

        if self.getRoom(roomId) is None:
            raise WiserNotFound(
                &#34;getRoomSchedule for room {} not found &#34;.format(roomId))

        scheduleId = self.getRoom(roomId).get(&#34;ScheduleId&#34;)
        if scheduleId is not None:
            for schedule in (self.wiserHubData.get(&#34;Schedule&#34;)):
                if schedule.get(&#34;id&#34;) == scheduleId:
                    return schedule
            raise WiserNotFound(
                &#34;getRoomSchedule for room {} not found &#34;.format(roomId))
        else:
            raise WiserNotFound(
                &#34;getRoomSchedule for room {} not found &#34;.format(roomId))

    def setRoomSchedule(self, roomId, scheduleData: dict):
        &#34;&#34;&#34;
        Sets Room Schedule

        param roomId:
        param scheduleData: json data for schedule
        return:
        &#34;&#34;&#34;
        scheduleId = self.getRoom(roomId).get(&#34;ScheduleId&#34;)

        if scheduleId is not None:
            patchData = scheduleData
            response = requests.patch(
                url=WISERSCHEDULEURL.format(self.hubIP, scheduleId),
                headers=self.headers, json=patchData, timeout=TIMEOUT)

            if response.status_code != 200:
                _LOGGER.debug(&#34;Set Schedule Response code = {}&#34;.format(
                    response.status_code))
                raise WiserRESTException(
                    &#34;Error setting schedule for room {} , error {} {}&#34;.format(
                        roomId, response.status_code, response.text))
        else:
            raise WiserNotFound(&#34;No schedule found that matches roomId&#34;)

    def setRoomScheduleFromFile(self, roomId, scheduleFile: str):
        &#34;&#34;&#34;
        Sets Room Schedule

        param roomId:
        param scheduleData: json data for schedule
        return:
        &#34;&#34;&#34;
        scheduleId = self.getRoom(roomId).get(&#34;ScheduleId&#34;)


        if scheduleId is not None:
            if os.path.exists(scheduleFile):
                try:
                    with open(scheduleFile, &#39;r&#39;) as f:
                        scheduleData = json.load(f)
                except:
                    raise Exception(
                        &#34;Error reading file {}&#34;.format(scheduleFile))

                patchData = scheduleData
                response = requests.patch(
                    url=WISERSCHEDULEURL.format(self.hubIP, scheduleId),
                    headers=self.headers, json=patchData, timeout=TIMEOUT)

                if response.status_code != 200:
                    _LOGGER.debug(&#34;Set Schedule Response code = {}&#34;.format(
                        response.status_code))
                    raise WiserRESTException(
                        &#34;Error setting schedule for room {} , error {} {}&#34;.format(
                            roomId, response.status_code,
                            response.text))
            else:
                raise FileNotFoundError(&#34;Schedule file, {}, not found.&#34;.format(
                    os.path.abspath(scheduleFile)))
        else:
            raise WiserNotFound(&#34;No schedule found that matches roomId&#34;)

    def copyRoomSchedule(self, fromRoomId, toRoomId):
        &#34;&#34;&#34;
        Copies Room Schedule from one room to another

        param fromRoomId:
        param toRoomId:
        return: boolean
        &#34;&#34;&#34;
        scheduleData = self.getRoomSchedule(fromRoomId)

        print(json.dumps(scheduleData))

        print(&#34;TYPE:{}&#34;.format(type(scheduleData)))

        if scheduleData is not None:
            self.setRoomSchedule(toRoomId, scheduleData)
        else:
            raise WiserNotFound(
                &#34;Error copying schedule.  One of the room Ids is not valid&#34;)

    def setHomeAwayMode(self, mode, temperature=10):
        &#34;&#34;&#34;
        Sets default Home or Away mode, optionally allows you to set a temperature for away mode

        param mode: HOME   | AWAY

        param temperature: Temperature between 5-30C or -20 for OFF

        return:
        &#34;&#34;&#34;
        _LOGGER.info(
            &#34;Setting Home/Away mode to : {} {} C&#34;.format(mode, temperature))


        if mode not in [&#39;HOME&#39;, &#39;AWAY&#39;]:
            raise ValueError(&#34;setAwayHome can only be HOME or AWAY&#34;)

        if mode == &#34;AWAY&#34;:
            if temperature is None:
                raise ValueError(
                    &#34;setAwayHome set to AWAY but not temperature set&#34;)
            if not (self.__checkTempRange(temperature)):
                raise ValueError(
                    &#34;setAwayHome temperature can only be between {} and {} or {}(Off)&#34;.format(
                        TEMP_MINIMUM, TEMP_MAXIMUM, TEMP_OFF))
        _LOGGER.info(&#34;Setting Home/Away : {}&#34;.format(mode))

        if mode == &#34;AWAY&#34;:
            patchData = {&#34;type&#34;: 2,
                              &#34;setPoint&#34;: self.__toWiserTemp(temperature)}
        else:
            patchData = {&#34;type&#34;: 0, &#34;setPoint&#34;: 0}
        _LOGGER.debug(&#34;patchdata {} &#34;.format(patchData))
        response = requests.patch(url=WISERMODEURL.format(self.hubIP),
                                       headers=self.headers,
                                       json=patchData, timeout=TIMEOUT)
        if response.status_code != 200:
            _LOGGER.debug(&#34;Set Home/Away Response code = {}&#34;.format(
                response.status_code))
            raise ValueError(&#34;Error setting Home/Away , error {} {}&#34;.format(
                response.status_code, response.text))

    def setRoomTemperature(self, roomId, temperature):
        &#34;&#34;&#34;
        Sets the room temperature
        param roomId:  The Room ID
        param temperature:  The temperature in celcius from 5 to 30, -20 for Off
        &#34;&#34;&#34;
        _LOGGER.info(
            &#34;Set Room {} Temperature to = {} &#34;.format(roomId, temperature))
        if not (self.__checkTempRange(temperature)):
            raise ValueError(
                &#34;SetRoomTemperature : value of temperature must be between {} and {} OR {} (off)&#34;.format(
                    TEMP_MINIMUM, TEMP_MAXIMUM, TEMP_OFF))
        patchData = {&#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                         &#34;SetPoint&#34;: self.__toWiserTemp(
                                             temperature)}}
        response = requests.patch(WISERSETROOMTEMP.format(
            self.hubIP, roomId), headers=self.headers, json=patchData,
            timeout=TIMEOUT)
        if response.status_code != 200:
            _LOGGER.error(
                &#34;Set Room {} Temperature to = {} resulted in {}&#34;.format(roomId,
                                                                        temperature,
                                                                        response.status_code))
            raise WiserRESTException(
                &#34;Error setting temperature, error {} &#34;.format(
                    response.text))
        _LOGGER.debug(
            &#34;Set room Temp, error {} ({})&#34;.format(response.status_code,
                                                  response.text))

    # Set Room Mode (Manual, Boost,Off or Auto )
    # If set to off then the trv goes to manual and temperature of -200
    #
    def setRoomMode(self, roomId, mode, boost_temp=20, boost_temp_time=30):
        &#34;&#34;&#34;
        Set the Room Mode, this can be Auto, Manual, off or Boost. When you set the mode back to Auto it will automatically take the scheduled temperature

        param roomId: RoomId

        param mode:  Mode (auto, manual off, or boost)

        param boost_temp:  If boosting enter the temperature here in C, can be between 5-30

        param boost_temp_time:  How long to boost for in minutes

        &#34;&#34;&#34;
        # TODO
        _LOGGER.debug(&#34;Set Mode {} for a room {} &#34;.format(mode, roomId))
        if mode.lower() == &#34;auto&#34;:
            # Do Auto
            patchData = {&#34;Mode&#34;: &#34;Auto&#34;}
        elif mode.lower() == &#34;boost&#34;:
            if boost_temp &lt; TEMP_MINIMUM or boost_temp &gt; TEMP_MAXIMUM:
                raise ValueError(
                    &#34;Boost temperature is set to {}. Boost temperature can only be between {} and {}.&#34;.format(
                        boost_temp, TEMP_MINIMUM, TEMP_MAXIMUM))
            _LOGGER.debug(
                &#34;Setting room {} to boost mode with temp of {} for {} mins&#34;.format(
                    roomId, boost_temp, boost_temp_time))
            patchData = {&#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                             &#34;DurationMinutes&#34;: boost_temp_time,
                                             &#34;SetPoint&#34;: self.__toWiserTemp(
                                                 boost_temp),
                                             &#34;Originator&#34;: &#34;App&#34;}}
        elif mode.lower() == &#34;manual&#34;:
            # When setting to manual , set the temp to the current scheduled temp 
            setTemp = self.__fromWiserTemp(
                self.getRoom(roomId).get(&#34;ScheduledSetPoint&#34;))
            # If current scheduled temp is less than 5C then set to min temp
            setTemp = setTemp if setTemp &gt;= TEMP_MINIMUM else TEMP_MINIMUM
            patchData = {&#34;Mode&#34;: &#34;Manual&#34;,
                         &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                             &#34;SetPoint&#34;: self.__toWiserTemp(
                                                 setTemp)}}
        # Implement trv off as per https://github.com/asantaga/wiserheatingapi/issues/3
        elif mode.lower() == &#34;off&#34;:
            patchData = {&#34;Mode&#34;: &#34;Manual&#34;,
                         &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                             &#34;SetPoint&#34;: self.__toWiserTemp(
                                                 TEMP_OFF)}}
        else:
            raise ValueError(
                &#34;Error setting setting room mode, received  {} but should be auto,boost,off or manual &#34;.format(
                    mode))

        # if not a boost operation cancel any current boost
        if mode.lower() != &#34;boost&#34;:
            cancelBoostPostData = {
                &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;None&#34;, &#34;DurationMinutes&#34;: 0,
                                    &#34;SetPoint&#34;: 0, &#34;Originator&#34;: &#34;App&#34;}}

            response = requests.patch(
                WISERROOM.format(self.hubIP, roomId), headers=self.headers,
                json=cancelBoostPostData, timeout=TIMEOUT)
            if response.status_code != 200:
                _LOGGER.error(&#34;Cancelling boost resulted in {}&#34;.format(
                    response.status_code))
                raise WiserRESTException(
                    &#34;Error cancelling boost {} &#34;.format(mode))

        # Set new mode
        response = requests.patch(WISERROOM.format(
            self.hubIP, roomId), headers=self.headers, json=patchData,
            timeout=TIMEOUT)
        if response.status_code != 200:
            _LOGGER.error(
                &#34;Set Room {} to Mode {} resulted in {}&#34;.format(roomId, mode,
                                                               response.status_code))
            raise WiserRESTException(
                &#34;Error setting mode to {}, error {} &#34;.format(mode,
                                                             response.text))
        _LOGGER.debug(
            &#34;Set room mode, error {} ({})&#34;.format(response.status_code,
                                                  response.text))

    def getSmartPlugs(self):
        self.checkHubData()
        return self.getHubData().get(&#34;SmartPlug&#34;)

    def getSmartPlug(self,smartPlugId):
        self.checkHubData()
        if self.getHubData().get(&#34;SmartPlug&#34;) is not None:
            for plug in self.getHubData().get(&#34;SmartPlug&#34;):
                if plug.get(&#34;id&#34;) == smartPlugId:
                    return plug
        # If we get here then the plug was not found
        raise WiserNotFound(&#34;Unable to find smartPlug {}&#34;.format(smartPlugId))

    def getSmartPlugState(self, smartPlugId):
        self.checkHubData()
        if self.getHubData().get(&#34;SmartPlug&#34;) is not None:
            for plug in self.getHubData().get(&#34;SmartPlug&#34;):
                if plug.get(&#34;id&#34;) == smartPlugId:
                    return plug.get(&#34;OutputState&#34;)
        # If we get here then the plug was not found
        raise WiserNotFound(&#34;Unable to find smartPlug {}&#34;.format(smartPlugId))

    def setSmartPlugState(self, smartPlugId, smartPlugState):

        if smartPlugState.title() not in [&#34;On&#34;, &#34;Off&#34;]:
            _LOGGER.error(&#34;SmartPlug State must be either On or Off&#34;)
            raise ValueError(&#34;SmartPlug State must be either On or Off&#34;)

        url = WISERSMARTPLUGURL.format(self.hubIP, smartPlugId)
        patchData = {&#34;RequestOutput&#34;: smartPlugState.title()}

        _LOGGER.debug(
            &#34;Setting smartplug status patchdata {} &#34;.format(patchData))
        response = requests.patch(url=url.format(self.hubIP),
                                  headers=self.headers,
                                  json=patchData,
                                  timeout=TIMEOUT)
        if response.status_code != 200:
            if response.status_code == 404:
                _LOGGER.debug(&#34;Set smart plug not found error &#34;)
                raise WiserNotFound(
                    &#34;Set smart plug {} not found error&#34;.format(smartPlugId))
            else:
                _LOGGER.debug(
                    &#34;Set smart plug error {} Response code = {}&#34;.format(
                        response.text, response.status_code))
                raise WiserRESTException(
                    &#34;Error setting smartplug mode, msg {} , error {}&#34;.format(
                        response.status_code,
                        response.text))

    def getSmartPlugMode(self, smartPlugId):
        self.checkHubData()
        if self.getHubData().get(&#34;SmartPlug&#34;) is not None:
            for plug in self.getHubData().get(&#34;SmartPlug&#34;):
                if plug.get(&#34;id&#34;) == smartPlugId:
                    return plug.get(&#34;Mode&#34;)
        # If we get here then the plug was not found
        raise WiserNotFound(&#34;Unable to find smartPlug {}&#34;.format(smartPlugId))

    def setSmartPlugMode(self, smartPlugId, smartPlugMode):

        if smartPlugMode.title() not in [&#34;Auto&#34;, &#34;Manual&#34;]:
            _LOGGER.error(&#34;SmartPlug Mode must be either Auto or Manual&#34;)
            raise ValueError(&#34;SmartPlug Mode must be either Auto or Manual&#34;)

        url = WISERSMARTPLUGURL.format(self.hubIP, smartPlugId)
        patchData = {&#34;Mode&#34;: smartPlugMode.title()}

        _LOGGER.debug(
            &#34;Setting smartplug status patchdata {} &#34;.format(patchData))
        response = requests.patch(url=url.format(self.hubIP),
                                  headers=self.headers,
                                  json=patchData,
                                  timeout=TIMEOUT)
        if response.status_code != 200:
            if response.status_code == 404:
                _LOGGER.debug(&#34;Set smart plug not found error &#34;)
                raise WiserNotFound(
                    &#34;Set smart plug {} not found error&#34;.format(smartPlugId))
            else:
                _LOGGER.debug(
                    &#34;Set smart plug error {} Response code = {}&#34;.format(
                        response.text, response.status_code))
                raise WiserRESTException(
                    &#34;Error setting smartplug mode, msg {} , error {}&#34;.format(
                        response.status_code,
                        response.text))</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="wiserHeatingAPI.wiserHub.Error"><code class="flex name class">
<span>class <span class="ident">Error</span></span>
<span>(</span><span>...)</span>
</code></dt>
<dd>
<section class="desc"><p>Base class for exceptions in this module.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Error(Exception):
    &#34;&#34;&#34;Base class for exceptions in this module.&#34;&#34;&#34;
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="wiserHeatingAPI.wiserHub.WiserHubAuthenticationException" href="#wiserHeatingAPI.wiserHub.WiserHubAuthenticationException">WiserHubAuthenticationException</a></li>
<li><a title="wiserHeatingAPI.wiserHub.WiserHubDataNull" href="#wiserHeatingAPI.wiserHub.WiserHubDataNull">WiserHubDataNull</a></li>
<li><a title="wiserHeatingAPI.wiserHub.WiserHubTimeoutException" href="#wiserHeatingAPI.wiserHub.WiserHubTimeoutException">WiserHubTimeoutException</a></li>
<li><a title="wiserHeatingAPI.wiserHub.WiserNoDevicesFound" href="#wiserHeatingAPI.wiserHub.WiserNoDevicesFound">WiserNoDevicesFound</a></li>
<li><a title="wiserHeatingAPI.wiserHub.WiserNoHeatingFound" href="#wiserHeatingAPI.wiserHub.WiserNoHeatingFound">WiserNoHeatingFound</a></li>
<li><a title="wiserHeatingAPI.wiserHub.WiserNoHotWaterFound" href="#wiserHeatingAPI.wiserHub.WiserNoHotWaterFound">WiserNoHotWaterFound</a></li>
<li><a title="wiserHeatingAPI.wiserHub.WiserNoRoomsFound" href="#wiserHeatingAPI.wiserHub.WiserNoRoomsFound">WiserNoRoomsFound</a></li>
<li><a title="wiserHeatingAPI.wiserHub.WiserNotFound" href="#wiserHeatingAPI.wiserHub.WiserNotFound">WiserNotFound</a></li>
<li><a title="wiserHeatingAPI.wiserHub.WiserRESTException" href="#wiserHeatingAPI.wiserHub.WiserRESTException">WiserRESTException</a></li>
</ul>
</dd>
<dt id="wiserHeatingAPI.wiserHub.WiserHubAuthenticationException"><code class="flex name class">
<span>class <span class="ident">WiserHubAuthenticationException</span></span>
<span>(</span><span>...)</span>
</code></dt>
<dd>
<section class="desc"><p>Base class for exceptions in this module.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class WiserHubAuthenticationException(Error):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="wiserHeatingAPI.wiserHub.Error" href="#wiserHeatingAPI.wiserHub.Error">Error</a></li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="wiserHeatingAPI.wiserHub.WiserHubDataNull"><code class="flex name class">
<span>class <span class="ident">WiserHubDataNull</span></span>
<span>(</span><span>...)</span>
</code></dt>
<dd>
<section class="desc"><p>Base class for exceptions in this module.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class WiserHubDataNull(Error):
    _LOGGER.info(&#34;WiserHub data null after refresh&#34;)
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="wiserHeatingAPI.wiserHub.Error" href="#wiserHeatingAPI.wiserHub.Error">Error</a></li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="wiserHeatingAPI.wiserHub.WiserHubTimeoutException"><code class="flex name class">
<span>class <span class="ident">WiserHubTimeoutException</span></span>
<span>(</span><span>...)</span>
</code></dt>
<dd>
<section class="desc"><p>Base class for exceptions in this module.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class WiserHubTimeoutException(Error):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="wiserHeatingAPI.wiserHub.Error" href="#wiserHeatingAPI.wiserHub.Error">Error</a></li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="wiserHeatingAPI.wiserHub.WiserNoDevicesFound"><code class="flex name class">
<span>class <span class="ident">WiserNoDevicesFound</span></span>
<span>(</span><span>...)</span>
</code></dt>
<dd>
<section class="desc"><p>Base class for exceptions in this module.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class WiserNoDevicesFound(Error):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="wiserHeatingAPI.wiserHub.Error" href="#wiserHeatingAPI.wiserHub.Error">Error</a></li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="wiserHeatingAPI.wiserHub.WiserNoHeatingFound"><code class="flex name class">
<span>class <span class="ident">WiserNoHeatingFound</span></span>
<span>(</span><span>...)</span>
</code></dt>
<dd>
<section class="desc"><p>Base class for exceptions in this module.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class WiserNoHeatingFound(Error):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="wiserHeatingAPI.wiserHub.Error" href="#wiserHeatingAPI.wiserHub.Error">Error</a></li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="wiserHeatingAPI.wiserHub.WiserNoHotWaterFound"><code class="flex name class">
<span>class <span class="ident">WiserNoHotWaterFound</span></span>
<span>(</span><span>...)</span>
</code></dt>
<dd>
<section class="desc"><p>Base class for exceptions in this module.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class WiserNoHotWaterFound(Error):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="wiserHeatingAPI.wiserHub.Error" href="#wiserHeatingAPI.wiserHub.Error">Error</a></li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="wiserHeatingAPI.wiserHub.WiserNoRoomsFound"><code class="flex name class">
<span>class <span class="ident">WiserNoRoomsFound</span></span>
<span>(</span><span>...)</span>
</code></dt>
<dd>
<section class="desc"><p>Base class for exceptions in this module.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class WiserNoRoomsFound(Error):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="wiserHeatingAPI.wiserHub.Error" href="#wiserHeatingAPI.wiserHub.Error">Error</a></li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="wiserHeatingAPI.wiserHub.WiserNotFound"><code class="flex name class">
<span>class <span class="ident">WiserNotFound</span></span>
<span>(</span><span>...)</span>
</code></dt>
<dd>
<section class="desc"><p>Base class for exceptions in this module.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class WiserNotFound(Error):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="wiserHeatingAPI.wiserHub.Error" href="#wiserHeatingAPI.wiserHub.Error">Error</a></li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="wiserHeatingAPI.wiserHub.WiserRESTException"><code class="flex name class">
<span>class <span class="ident">WiserRESTException</span></span>
<span>(</span><span>...)</span>
</code></dt>
<dd>
<section class="desc"><p>Base class for exceptions in this module.</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class WiserRESTException(Error):
    pass</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="wiserHeatingAPI.wiserHub.Error" href="#wiserHeatingAPI.wiserHub.Error">Error</a></li>
<li>builtins.Exception</li>
<li>builtins.BaseException</li>
</ul>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub"><code class="flex name class">
<span>class <span class="ident">wiserHub</span></span>
<span>(</span><span>hubIP, secret)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class wiserHub:

    def __init__(self, hubIP, secret):
        _LOGGER.info(
            &#34;WiserHub API Initialised : Version {}&#34;.format(__VERSION__))
        self.wiserHubData = None
        self.wiserNetworkData = None
        self.hubIP = hubIP
        self.hubSecret = secret
        self.headers = {&#39;SECRET&#39;: self.hubSecret,
                        &#39;Content-Type&#39;: &#39;application/json;charset=UTF-8&#39;}
        # Dict holding Valve2Room mapping convinience variable
        self.device2roomMap = {}
        self.refreshData()  # Issue first refresh in init

    def __toWiserTemp(self, temp):
        &#34;&#34;&#34;
        Converts from temperature to wiser hub format
        param temp: The temperature to convert
        return: Integer
        &#34;&#34;&#34;
        temp = int(temp * 10)
        return temp

    def __fromWiserTemp(self, temp):
        &#34;&#34;&#34;
        Conerts from wiser hub temperature format to decimal value
        param temp: The wiser temperature to convert
        return: Float
        &#34;&#34;&#34;
        temp = round(temp / 10, 1)
        return temp

    def __checkTempRange(self, temp):
        &#34;&#34;&#34;
        Validates temperatures are within the allowed range for the wiser hub
        param temp: The temperature to check
        return: Boolean
        &#34;&#34;&#34;
        if temp != TEMP_OFF and (temp &lt; TEMP_MINIMUM or temp &gt; TEMP_MAXIMUM):
            return False
        else:
            return True

    def checkHubData(self):
        &#34;&#34;&#34;
        Method checks the hub data object is populated, if it is not then it
        executes the refresh method, if the hubdata object is still null then
        it raises an error

        &#34;&#34;&#34;
        if self.wiserHubData is None:
            self.refreshData()
        if self.wiserHubData is None:
            raise WiserHubDataNull(
                &#34;Hub data null even after refresh, aborting request&#34;)
        # Otherwise continue

    def refreshData(self):
        &#34;&#34;&#34;
        Forces a refresh of data from the wiser hub
        return: JSON Data
        &#34;&#34;&#34;

        _LOGGER.info(&#34;Updating Wiser Hub Data&#34;)
        try:
            resp = requests.get(WISERHUBURL.format(
                self.hubIP), headers=self.headers, timeout=TIMEOUT)
                
            resp.raise_for_status()
            self.wiserHubData = resp.json()
            
            _LOGGER.debug(
                &#34;Wiser Hub Data received {} &#34;.format(self.wiserHubData))
            if self.getRooms() is not None:
                for room in self.getRooms():
                    roomStatId = room.get(&#34;RoomStatId&#34;)
                    if roomStatId is not None:
                        # RoomStat found add it to the list
                        self.device2roomMap[roomStatId] = {
                            &#34;roomId&#34;: room.get(&#34;id&#34;),
                            &#34;roomName&#34;: room.get(&#34;Name&#34;)}
                    smartValves = room.get(&#34;SmartValveIds&#34;)
                    if smartValves is not None:
                        for valveId in smartValves:
                            self.device2roomMap[valveId] = {
                                &#34;roomId&#34;: room.get(&#34;id&#34;),
                                &#34;roomName&#34;: room.get(&#34;Name&#34;)}
                    # Show warning if room contains no devices.
                    if roomStatId is None and smartValves is None:
                        # No devices in room
                        _LOGGER.warning(
                            &#34;Room {} doesn&#39;t contain any smart valves or thermostats.&#34;.format(
                                room.get(&#34;Name&#34;)))
                _LOGGER.debug(&#34; valve2roomMap{} &#34;.format(self.device2roomMap))
            else:
                _LOGGER.warning(&#34;Wiser found no rooms&#34;)

            # The Wiser Heat Hub can return invalid JSON, so remove all non-printable characters before trying to parse JSON
            responseContent = requests.get(WISERNETWORKURL.format(self.hubIP), headers=self.headers, timeout=TIMEOUT).content
            responseContent = re.sub(rb&#39;[^\x20-\x7F]+&#39;, b&#39;&#39;, responseContent)
            self.WiserNetworkData = json.loads(responseContent)

        except requests.Timeout:
            _LOGGER.debug(
                &#34;Connection timed out trying to update from Wiser Hub&#34;)
            raise WiserHubTimeoutException(&#34;The connection timed out.&#34;)
        except requests.HTTPError:
            if self.wiserHubData.status_code == 401:
                raise WiserHubAuthenticationException(&#34;Authentication error.  Check secret key.&#34;)
            elif self.wiserHubData.status_code == 404:
                raise WiserRESTException(&#34;Not Found.&#34;)
            else:
                raise WiserRESTException(&#34;Unknown Error.&#34;)
        except requests.ConnectionError:
            _LOGGER.debug(&#34;Connection error trying to update from Wiser Hub&#34;)
        return self.wiserHubData

    def getHubData(self):
        &#34;&#34;&#34;
        Retrieves the full JSON payload ,
        for functions where I haven&#39;t provided a API yet

        returns : JSON Data
        &#34;&#34;&#34;
        self.checkHubData()
        return self.wiserHubData

    def getWiserHubName(self):
        return self.wiserNetworkData.get(&#34;Station&#34;).get(&#34;MdnsHostname&#34;)
        
    def getMACAddress(self):
        return self.wiserNetworkData.get(&#34;Station&#34;).get(&#34;MacAddress&#34;)
        
    def getRooms(self):
        &#34;&#34;&#34;
        Gets Room Data as JSON Payload
        &#34;&#34;&#34;
        self.checkHubData()
        return self.wiserHubData.get(&#34;Room&#34;)

    def getRoom(self, roomId):
        &#34;&#34;&#34;
        Convinience to get data on a single room

        param roomId: The roomID
        return:
        &#34;&#34;&#34;
        self.checkHubData()
        if self.wiserHubData.get(&#34;Room&#34;) is None:
            _LOGGER.warning(&#34;getRoom called but no rooms found&#34;)
            raise WiserNoRoomsFound(&#34;No rooms found in Wiser payload&#34;)
        for room in (self.wiserHubData.get(&#34;Room&#34;)):
            if room.get(&#34;id&#34;) == roomId:
                return room
        raise WiserNotFound(&#34;Room {} not found&#34;.format(roomId))

    def getSystem(self):
        &#34;&#34;&#34;
        Convinience function to get system information

        return: JSON with system data
        &#34;&#34;&#34;
        self.checkHubData()
        return self.wiserHubData.get(&#34;System&#34;)

    def getHotwater(self):
        &#34;&#34;&#34;
        Convinience function to get hotwater data

        return: JSON with hotwater data

        &#34;&#34;&#34;
        self.checkHubData()
        return self.wiserHubData.get(&#34;HotWater&#34;)

    def getHeatingChannels(self):
        &#34;&#34;&#34;
        Convinience function to get heating channel data

        return: JSON data
        &#34;&#34;&#34;
        self.checkHubData()
        return self.wiserHubData.get(&#34;HeatingChannel&#34;)

    def getDevices(self):
        &#34;&#34;&#34;
        Convinience function to get devices data

        return: JSON data
        &#34;&#34;&#34;
        self.checkHubData()

        return self.wiserHubData.get(&#34;Device&#34;)

    def getDevice(self, deviceId):
        &#34;&#34;&#34;
        Get single devices data

        param deviceId:
        return: Device JSON Data
        &#34;&#34;&#34;
        self.checkHubData()

        if self.wiserHubData.get(&#34;Device&#34;) is None:
            _LOGGER.warning(&#34;getRoom called but no rooms found&#34;)
            raise WiserNoRoomsFound(&#34;getRoom called but no rooms found&#34;)
        for device in (self.wiserHubData.get(&#34;Device&#34;)):
            if device.get(&#34;id&#34;) == deviceId:
                return device
        raise WiserNotFound(&#34;Device {} not found &#34;.format(deviceId))

    def getDeviceRoom(self, deviceId):
        &#34;&#34;&#34;
        Convinience function to return the name of a room which is associated
        with a device (roomstat or trf)
        param deviceId:
        return: Name of Room associated with a device ID
        &#34;&#34;&#34;
        self.checkHubData()
        _LOGGER.debug(&#34; getDeviceRoom called, valve2roomMap is {} &#34;.format(
            self.device2roomMap))
        if not self.device2roomMap:
            self.refreshData()
        # This will return None if no device found, thats ok
        return self.device2roomMap[deviceId]

    def getHeatingRelayStatus(self):
        &#34;&#34;&#34;
        Returns heating relay status
        return:  On or Off
        &#34;&#34;&#34;
        # self.checkHubData()
        heatingRelayStatus = &#34;Off&#34;
        # There could be multiple heating channels, 
        heatingChannels = self.getHeatingChannels()
        for heatingChannel in heatingChannels:
            if heatingChannel.get(&#34;HeatingRelayState&#34;) == &#34;On&#34;:
                heatingRelayStatus = &#34;On&#34;
        return heatingRelayStatus

    def getHotwaterRelayStatus(self):
        &#34;&#34;&#34;
         Returns hotwater relay status
        return:  On or Off

        &#34;&#34;&#34;
        self.checkHubData()
        &#34;&#34;&#34;
        If there is no hotwater object then return false
        &#34;&#34;&#34;
        if len(self.wiserHubData.get(&#34;HotWater&#34;)) &lt; 1:
            return False

        return self.wiserHubData.get(&#34;HotWater&#34;)[0].get(&#34;WaterHeatingState&#34;)

    def setHotwaterMode(self, mode):
        &#34;&#34;&#34;
          Switch Hot Water on or off manually, or reset to &#39;Auto&#39; (schedule).
          &#39;mode&#39; can be &#34;on&#34;, &#34;off&#34; or &#34;auto&#34;.
        &#34;&#34;&#34;

        # Wiser requires a temperature when patching the Hot Water state,
        # reflecting &#39;on&#39; or &#39;off&#39;
        DHWOnTemp = 1100
        DHWOffTemp = -200

        modeMapping = {
            &#39;on&#39;: {
                &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;, &#34;SetPoint&#34;: DHWOnTemp}},
            &#39;off&#39;: {
                &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;, &#34;SetPoint&#34;: DHWOffTemp}},
            &#39;auto&#39;: {&#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;None&#34;, &#34;Mode&#34;: &#34;Auto&#34;}},
        }

        _mode = mode.lower()
        if _mode not in [&#39;on&#39;, &#39;off&#39;, &#39;auto&#39;]:
            raise ValueError(
                &#34;Hot Water can be either &#39;on&#39;, &#39;off&#39; or &#39;auto&#39; - not &#39;%s&#39;&#34; % _mode)

        # Obtain our DHW control ID
        if self.wiserHubData is None:
            self.refreshData()
        DHWId = self.wiserHubData.get(&#34;HotWater&#34;)[0].get(&#34;id&#34;)

        _url = WISERHUBURL.format(self.hubIP) + &#34;/HotWater/{}/&#34;.format(DHWId)
        _LOGGER.debug(&#34;Sending Patch Data: {}, to URL [{}]&#34;.format(
            modeMapping.get(_mode), _url))
        response = requests.patch(url=_url, headers=self.headers,
                                       json=modeMapping.get(_mode))
        if response.status_code != 200:
            _LOGGER.debug(
                &#34;Set DHW Response code = {}&#34;.format(response.status_code))
            raise WiserRESTException(
                &#34;Error setting hot water mode to {}, error {} {}&#34;.
                    format(_mode, response.status_code, response.text))

        return True

    def setSystemSwitch(self, switch, mode=False):
        &#34;&#34;&#34;
        Sets a system switch. For details of which switches to set look at the System section of the payload from the wiserhub
        :param switch: Name of Switch
        :param mode: Value of mode
        :return:
        &#34;&#34;&#34;
        patchData = {switch: mode}
        url = WISERHUBURL + &#34;System&#34;

        _LOGGER.debug(&#34;patchdata {} &#34;.format(patchData))
        response = requests.patch(url=url.format(self.hubIP),
                                       headers=self.headers,
                                       json=patchData, timeout=TIMEOUT)
        if response.status_code != 200:
            _LOGGER.debug(&#34;Set {} Response code = {}&#34;.format(switch,
                                                             response.status_code))
            raise WiserRESTException(
                &#34;Error setting {} , error {} {}&#34;.format(switch,
                                                        response.status_code,
                                                        response.text))

    def getRoomStatData(self, deviceId):
        &#34;&#34;&#34;
        Gets Room Thermostats Data

        param deviceId:
        return:
        &#34;&#34;&#34;
        self.checkHubData()

        if self.wiserHubData[&#39;RoomStat&#39;] is None:
            _LOGGER.warning(&#34;getRoomStatData called but no RoomStats found&#34;)
            raise WiserNotFound(&#34;deviceID {} not found &#34;.format(deviceId))

        for roomStat in self.wiserHubData[&#39;RoomStat&#39;]:
            if roomStat.get(&#34;id&#34;) == deviceId:
                return roomStat
        &#34;&#34;&#34;
        If we get here then the deviceId was not found
        &#34;&#34;&#34;
        raise WiserNotFound(
            &#34;getRoomStatData for deviceID {} not found due&#34;.format(deviceId))

    def getRoomSchedule(self, roomId):
        &#34;&#34;&#34;
        Gets Room Schedule Data
        
        param roomId:
        return: json data
        &#34;&#34;&#34;
        self.checkHubData()

        if self.getRoom(roomId) is None:
            raise WiserNotFound(
                &#34;getRoomSchedule for room {} not found &#34;.format(roomId))

        scheduleId = self.getRoom(roomId).get(&#34;ScheduleId&#34;)
        if scheduleId is not None:
            for schedule in (self.wiserHubData.get(&#34;Schedule&#34;)):
                if schedule.get(&#34;id&#34;) == scheduleId:
                    return schedule
            raise WiserNotFound(
                &#34;getRoomSchedule for room {} not found &#34;.format(roomId))
        else:
            raise WiserNotFound(
                &#34;getRoomSchedule for room {} not found &#34;.format(roomId))

    def setRoomSchedule(self, roomId, scheduleData: dict):
        &#34;&#34;&#34;
        Sets Room Schedule

        param roomId:
        param scheduleData: json data for schedule
        return:
        &#34;&#34;&#34;
        scheduleId = self.getRoom(roomId).get(&#34;ScheduleId&#34;)

        if scheduleId is not None:
            patchData = scheduleData
            response = requests.patch(
                url=WISERSCHEDULEURL.format(self.hubIP, scheduleId),
                headers=self.headers, json=patchData, timeout=TIMEOUT)

            if response.status_code != 200:
                _LOGGER.debug(&#34;Set Schedule Response code = {}&#34;.format(
                    response.status_code))
                raise WiserRESTException(
                    &#34;Error setting schedule for room {} , error {} {}&#34;.format(
                        roomId, response.status_code, response.text))
        else:
            raise WiserNotFound(&#34;No schedule found that matches roomId&#34;)

    def setRoomScheduleFromFile(self, roomId, scheduleFile: str):
        &#34;&#34;&#34;
        Sets Room Schedule

        param roomId:
        param scheduleData: json data for schedule
        return:
        &#34;&#34;&#34;
        scheduleId = self.getRoom(roomId).get(&#34;ScheduleId&#34;)


        if scheduleId is not None:
            if os.path.exists(scheduleFile):
                try:
                    with open(scheduleFile, &#39;r&#39;) as f:
                        scheduleData = json.load(f)
                except:
                    raise Exception(
                        &#34;Error reading file {}&#34;.format(scheduleFile))

                patchData = scheduleData
                response = requests.patch(
                    url=WISERSCHEDULEURL.format(self.hubIP, scheduleId),
                    headers=self.headers, json=patchData, timeout=TIMEOUT)

                if response.status_code != 200:
                    _LOGGER.debug(&#34;Set Schedule Response code = {}&#34;.format(
                        response.status_code))
                    raise WiserRESTException(
                        &#34;Error setting schedule for room {} , error {} {}&#34;.format(
                            roomId, response.status_code,
                            response.text))
            else:
                raise FileNotFoundError(&#34;Schedule file, {}, not found.&#34;.format(
                    os.path.abspath(scheduleFile)))
        else:
            raise WiserNotFound(&#34;No schedule found that matches roomId&#34;)

    def copyRoomSchedule(self, fromRoomId, toRoomId):
        &#34;&#34;&#34;
        Copies Room Schedule from one room to another

        param fromRoomId:
        param toRoomId:
        return: boolean
        &#34;&#34;&#34;
        scheduleData = self.getRoomSchedule(fromRoomId)

        print(json.dumps(scheduleData))

        print(&#34;TYPE:{}&#34;.format(type(scheduleData)))

        if scheduleData is not None:
            self.setRoomSchedule(toRoomId, scheduleData)
        else:
            raise WiserNotFound(
                &#34;Error copying schedule.  One of the room Ids is not valid&#34;)

    def setHomeAwayMode(self, mode, temperature=10):
        &#34;&#34;&#34;
        Sets default Home or Away mode, optionally allows you to set a temperature for away mode

        param mode: HOME   | AWAY

        param temperature: Temperature between 5-30C or -20 for OFF

        return:
        &#34;&#34;&#34;
        _LOGGER.info(
            &#34;Setting Home/Away mode to : {} {} C&#34;.format(mode, temperature))


        if mode not in [&#39;HOME&#39;, &#39;AWAY&#39;]:
            raise ValueError(&#34;setAwayHome can only be HOME or AWAY&#34;)

        if mode == &#34;AWAY&#34;:
            if temperature is None:
                raise ValueError(
                    &#34;setAwayHome set to AWAY but not temperature set&#34;)
            if not (self.__checkTempRange(temperature)):
                raise ValueError(
                    &#34;setAwayHome temperature can only be between {} and {} or {}(Off)&#34;.format(
                        TEMP_MINIMUM, TEMP_MAXIMUM, TEMP_OFF))
        _LOGGER.info(&#34;Setting Home/Away : {}&#34;.format(mode))

        if mode == &#34;AWAY&#34;:
            patchData = {&#34;type&#34;: 2,
                              &#34;setPoint&#34;: self.__toWiserTemp(temperature)}
        else:
            patchData = {&#34;type&#34;: 0, &#34;setPoint&#34;: 0}
        _LOGGER.debug(&#34;patchdata {} &#34;.format(patchData))
        response = requests.patch(url=WISERMODEURL.format(self.hubIP),
                                       headers=self.headers,
                                       json=patchData, timeout=TIMEOUT)
        if response.status_code != 200:
            _LOGGER.debug(&#34;Set Home/Away Response code = {}&#34;.format(
                response.status_code))
            raise ValueError(&#34;Error setting Home/Away , error {} {}&#34;.format(
                response.status_code, response.text))

    def setRoomTemperature(self, roomId, temperature):
        &#34;&#34;&#34;
        Sets the room temperature
        param roomId:  The Room ID
        param temperature:  The temperature in celcius from 5 to 30, -20 for Off
        &#34;&#34;&#34;
        _LOGGER.info(
            &#34;Set Room {} Temperature to = {} &#34;.format(roomId, temperature))
        if not (self.__checkTempRange(temperature)):
            raise ValueError(
                &#34;SetRoomTemperature : value of temperature must be between {} and {} OR {} (off)&#34;.format(
                    TEMP_MINIMUM, TEMP_MAXIMUM, TEMP_OFF))
        patchData = {&#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                         &#34;SetPoint&#34;: self.__toWiserTemp(
                                             temperature)}}
        response = requests.patch(WISERSETROOMTEMP.format(
            self.hubIP, roomId), headers=self.headers, json=patchData,
            timeout=TIMEOUT)
        if response.status_code != 200:
            _LOGGER.error(
                &#34;Set Room {} Temperature to = {} resulted in {}&#34;.format(roomId,
                                                                        temperature,
                                                                        response.status_code))
            raise WiserRESTException(
                &#34;Error setting temperature, error {} &#34;.format(
                    response.text))
        _LOGGER.debug(
            &#34;Set room Temp, error {} ({})&#34;.format(response.status_code,
                                                  response.text))

    # Set Room Mode (Manual, Boost,Off or Auto )
    # If set to off then the trv goes to manual and temperature of -200
    #
    def setRoomMode(self, roomId, mode, boost_temp=20, boost_temp_time=30):
        &#34;&#34;&#34;
        Set the Room Mode, this can be Auto, Manual, off or Boost. When you set the mode back to Auto it will automatically take the scheduled temperature

        param roomId: RoomId

        param mode:  Mode (auto, manual off, or boost)

        param boost_temp:  If boosting enter the temperature here in C, can be between 5-30

        param boost_temp_time:  How long to boost for in minutes

        &#34;&#34;&#34;
        # TODO
        _LOGGER.debug(&#34;Set Mode {} for a room {} &#34;.format(mode, roomId))
        if mode.lower() == &#34;auto&#34;:
            # Do Auto
            patchData = {&#34;Mode&#34;: &#34;Auto&#34;}
        elif mode.lower() == &#34;boost&#34;:
            if boost_temp &lt; TEMP_MINIMUM or boost_temp &gt; TEMP_MAXIMUM:
                raise ValueError(
                    &#34;Boost temperature is set to {}. Boost temperature can only be between {} and {}.&#34;.format(
                        boost_temp, TEMP_MINIMUM, TEMP_MAXIMUM))
            _LOGGER.debug(
                &#34;Setting room {} to boost mode with temp of {} for {} mins&#34;.format(
                    roomId, boost_temp, boost_temp_time))
            patchData = {&#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                             &#34;DurationMinutes&#34;: boost_temp_time,
                                             &#34;SetPoint&#34;: self.__toWiserTemp(
                                                 boost_temp),
                                             &#34;Originator&#34;: &#34;App&#34;}}
        elif mode.lower() == &#34;manual&#34;:
            # When setting to manual , set the temp to the current scheduled temp 
            setTemp = self.__fromWiserTemp(
                self.getRoom(roomId).get(&#34;ScheduledSetPoint&#34;))
            # If current scheduled temp is less than 5C then set to min temp
            setTemp = setTemp if setTemp &gt;= TEMP_MINIMUM else TEMP_MINIMUM
            patchData = {&#34;Mode&#34;: &#34;Manual&#34;,
                         &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                             &#34;SetPoint&#34;: self.__toWiserTemp(
                                                 setTemp)}}
        # Implement trv off as per https://github.com/asantaga/wiserheatingapi/issues/3
        elif mode.lower() == &#34;off&#34;:
            patchData = {&#34;Mode&#34;: &#34;Manual&#34;,
                         &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                             &#34;SetPoint&#34;: self.__toWiserTemp(
                                                 TEMP_OFF)}}
        else:
            raise ValueError(
                &#34;Error setting setting room mode, received  {} but should be auto,boost,off or manual &#34;.format(
                    mode))

        # if not a boost operation cancel any current boost
        if mode.lower() != &#34;boost&#34;:
            cancelBoostPostData = {
                &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;None&#34;, &#34;DurationMinutes&#34;: 0,
                                    &#34;SetPoint&#34;: 0, &#34;Originator&#34;: &#34;App&#34;}}

            response = requests.patch(
                WISERROOM.format(self.hubIP, roomId), headers=self.headers,
                json=cancelBoostPostData, timeout=TIMEOUT)
            if response.status_code != 200:
                _LOGGER.error(&#34;Cancelling boost resulted in {}&#34;.format(
                    response.status_code))
                raise WiserRESTException(
                    &#34;Error cancelling boost {} &#34;.format(mode))

        # Set new mode
        response = requests.patch(WISERROOM.format(
            self.hubIP, roomId), headers=self.headers, json=patchData,
            timeout=TIMEOUT)
        if response.status_code != 200:
            _LOGGER.error(
                &#34;Set Room {} to Mode {} resulted in {}&#34;.format(roomId, mode,
                                                               response.status_code))
            raise WiserRESTException(
                &#34;Error setting mode to {}, error {} &#34;.format(mode,
                                                             response.text))
        _LOGGER.debug(
            &#34;Set room mode, error {} ({})&#34;.format(response.status_code,
                                                  response.text))

    def getSmartPlugs(self):
        self.checkHubData()
        return self.getHubData().get(&#34;SmartPlug&#34;)

    def getSmartPlug(self,smartPlugId):
        self.checkHubData()
        if self.getHubData().get(&#34;SmartPlug&#34;) is not None:
            for plug in self.getHubData().get(&#34;SmartPlug&#34;):
                if plug.get(&#34;id&#34;) == smartPlugId:
                    return plug
        # If we get here then the plug was not found
        raise WiserNotFound(&#34;Unable to find smartPlug {}&#34;.format(smartPlugId))

    def getSmartPlugState(self, smartPlugId):
        self.checkHubData()
        if self.getHubData().get(&#34;SmartPlug&#34;) is not None:
            for plug in self.getHubData().get(&#34;SmartPlug&#34;):
                if plug.get(&#34;id&#34;) == smartPlugId:
                    return plug.get(&#34;OutputState&#34;)
        # If we get here then the plug was not found
        raise WiserNotFound(&#34;Unable to find smartPlug {}&#34;.format(smartPlugId))

    def setSmartPlugState(self, smartPlugId, smartPlugState):

        if smartPlugState.title() not in [&#34;On&#34;, &#34;Off&#34;]:
            _LOGGER.error(&#34;SmartPlug State must be either On or Off&#34;)
            raise ValueError(&#34;SmartPlug State must be either On or Off&#34;)

        url = WISERSMARTPLUGURL.format(self.hubIP, smartPlugId)
        patchData = {&#34;RequestOutput&#34;: smartPlugState.title()}

        _LOGGER.debug(
            &#34;Setting smartplug status patchdata {} &#34;.format(patchData))
        response = requests.patch(url=url.format(self.hubIP),
                                  headers=self.headers,
                                  json=patchData,
                                  timeout=TIMEOUT)
        if response.status_code != 200:
            if response.status_code == 404:
                _LOGGER.debug(&#34;Set smart plug not found error &#34;)
                raise WiserNotFound(
                    &#34;Set smart plug {} not found error&#34;.format(smartPlugId))
            else:
                _LOGGER.debug(
                    &#34;Set smart plug error {} Response code = {}&#34;.format(
                        response.text, response.status_code))
                raise WiserRESTException(
                    &#34;Error setting smartplug mode, msg {} , error {}&#34;.format(
                        response.status_code,
                        response.text))

    def getSmartPlugMode(self, smartPlugId):
        self.checkHubData()
        if self.getHubData().get(&#34;SmartPlug&#34;) is not None:
            for plug in self.getHubData().get(&#34;SmartPlug&#34;):
                if plug.get(&#34;id&#34;) == smartPlugId:
                    return plug.get(&#34;Mode&#34;)
        # If we get here then the plug was not found
        raise WiserNotFound(&#34;Unable to find smartPlug {}&#34;.format(smartPlugId))

    def setSmartPlugMode(self, smartPlugId, smartPlugMode):

        if smartPlugMode.title() not in [&#34;Auto&#34;, &#34;Manual&#34;]:
            _LOGGER.error(&#34;SmartPlug Mode must be either Auto or Manual&#34;)
            raise ValueError(&#34;SmartPlug Mode must be either Auto or Manual&#34;)

        url = WISERSMARTPLUGURL.format(self.hubIP, smartPlugId)
        patchData = {&#34;Mode&#34;: smartPlugMode.title()}

        _LOGGER.debug(
            &#34;Setting smartplug status patchdata {} &#34;.format(patchData))
        response = requests.patch(url=url.format(self.hubIP),
                                  headers=self.headers,
                                  json=patchData,
                                  timeout=TIMEOUT)
        if response.status_code != 200:
            if response.status_code == 404:
                _LOGGER.debug(&#34;Set smart plug not found error &#34;)
                raise WiserNotFound(
                    &#34;Set smart plug {} not found error&#34;.format(smartPlugId))
            else:
                _LOGGER.debug(
                    &#34;Set smart plug error {} Response code = {}&#34;.format(
                        response.text, response.status_code))
                raise WiserRESTException(
                    &#34;Error setting smartplug mode, msg {} , error {}&#34;.format(
                        response.status_code,
                        response.text))</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.checkHubData"><code class="name flex">
<span>def <span class="ident">checkHubData</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Method checks the hub data object is populated, if it is not then it
executes the refresh method, if the hubdata object is still null then
it raises an error</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def checkHubData(self):
    &#34;&#34;&#34;
    Method checks the hub data object is populated, if it is not then it
    executes the refresh method, if the hubdata object is still null then
    it raises an error

    &#34;&#34;&#34;
    if self.wiserHubData is None:
        self.refreshData()
    if self.wiserHubData is None:
        raise WiserHubDataNull(
            &#34;Hub data null even after refresh, aborting request&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.copyRoomSchedule"><code class="name flex">
<span>def <span class="ident">copyRoomSchedule</span></span>(<span>self, fromRoomId, toRoomId)</span>
</code></dt>
<dd>
<section class="desc"><p>Copies Room Schedule from one room to another</p>
<p>param fromRoomId:
param toRoomId:
return: boolean</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def copyRoomSchedule(self, fromRoomId, toRoomId):
    &#34;&#34;&#34;
    Copies Room Schedule from one room to another

    param fromRoomId:
    param toRoomId:
    return: boolean
    &#34;&#34;&#34;
    scheduleData = self.getRoomSchedule(fromRoomId)

    print(json.dumps(scheduleData))

    print(&#34;TYPE:{}&#34;.format(type(scheduleData)))

    if scheduleData is not None:
        self.setRoomSchedule(toRoomId, scheduleData)
    else:
        raise WiserNotFound(
            &#34;Error copying schedule.  One of the room Ids is not valid&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getDevice"><code class="name flex">
<span>def <span class="ident">getDevice</span></span>(<span>self, deviceId)</span>
</code></dt>
<dd>
<section class="desc"><p>Get single devices data</p>
<p>param deviceId:
return: Device JSON Data</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getDevice(self, deviceId):
    &#34;&#34;&#34;
    Get single devices data

    param deviceId:
    return: Device JSON Data
    &#34;&#34;&#34;
    self.checkHubData()

    if self.wiserHubData.get(&#34;Device&#34;) is None:
        _LOGGER.warning(&#34;getRoom called but no rooms found&#34;)
        raise WiserNoRoomsFound(&#34;getRoom called but no rooms found&#34;)
    for device in (self.wiserHubData.get(&#34;Device&#34;)):
        if device.get(&#34;id&#34;) == deviceId:
            return device
    raise WiserNotFound(&#34;Device {} not found &#34;.format(deviceId))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getDeviceRoom"><code class="name flex">
<span>def <span class="ident">getDeviceRoom</span></span>(<span>self, deviceId)</span>
</code></dt>
<dd>
<section class="desc"><p>Convinience function to return the name of a room which is associated
with a device (roomstat or trf)
param deviceId:
return: Name of Room associated with a device ID</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getDeviceRoom(self, deviceId):
    &#34;&#34;&#34;
    Convinience function to return the name of a room which is associated
    with a device (roomstat or trf)
    param deviceId:
    return: Name of Room associated with a device ID
    &#34;&#34;&#34;
    self.checkHubData()
    _LOGGER.debug(&#34; getDeviceRoom called, valve2roomMap is {} &#34;.format(
        self.device2roomMap))
    if not self.device2roomMap:
        self.refreshData()
    # This will return None if no device found, thats ok
    return self.device2roomMap[deviceId]</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getDevices"><code class="name flex">
<span>def <span class="ident">getDevices</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Convinience function to get devices data</p>
<p>return: JSON data</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getDevices(self):
    &#34;&#34;&#34;
    Convinience function to get devices data

    return: JSON data
    &#34;&#34;&#34;
    self.checkHubData()

    return self.wiserHubData.get(&#34;Device&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getHeatingChannels"><code class="name flex">
<span>def <span class="ident">getHeatingChannels</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Convinience function to get heating channel data</p>
<p>return: JSON data</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getHeatingChannels(self):
    &#34;&#34;&#34;
    Convinience function to get heating channel data

    return: JSON data
    &#34;&#34;&#34;
    self.checkHubData()
    return self.wiserHubData.get(&#34;HeatingChannel&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getHeatingRelayStatus"><code class="name flex">
<span>def <span class="ident">getHeatingRelayStatus</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Returns heating relay status
return:
On or Off</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getHeatingRelayStatus(self):
    &#34;&#34;&#34;
    Returns heating relay status
    return:  On or Off
    &#34;&#34;&#34;
    # self.checkHubData()
    heatingRelayStatus = &#34;Off&#34;
    # There could be multiple heating channels, 
    heatingChannels = self.getHeatingChannels()
    for heatingChannel in heatingChannels:
        if heatingChannel.get(&#34;HeatingRelayState&#34;) == &#34;On&#34;:
            heatingRelayStatus = &#34;On&#34;
    return heatingRelayStatus</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getHotwater"><code class="name flex">
<span>def <span class="ident">getHotwater</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Convinience function to get hotwater data</p>
<p>return: JSON with hotwater data</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getHotwater(self):
    &#34;&#34;&#34;
    Convinience function to get hotwater data

    return: JSON with hotwater data

    &#34;&#34;&#34;
    self.checkHubData()
    return self.wiserHubData.get(&#34;HotWater&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getHotwaterRelayStatus"><code class="name flex">
<span>def <span class="ident">getHotwaterRelayStatus</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Returns hotwater relay status
return:
On or Off</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getHotwaterRelayStatus(self):
    &#34;&#34;&#34;
     Returns hotwater relay status
    return:  On or Off

    &#34;&#34;&#34;
    self.checkHubData()
    &#34;&#34;&#34;
    If there is no hotwater object then return false
    &#34;&#34;&#34;
    if len(self.wiserHubData.get(&#34;HotWater&#34;)) &lt; 1:
        return False

    return self.wiserHubData.get(&#34;HotWater&#34;)[0].get(&#34;WaterHeatingState&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getHubData"><code class="name flex">
<span>def <span class="ident">getHubData</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Retrieves the full JSON payload ,
for functions where I haven't provided a API yet</p>
<p>returns : JSON Data</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getHubData(self):
    &#34;&#34;&#34;
    Retrieves the full JSON payload ,
    for functions where I haven&#39;t provided a API yet

    returns : JSON Data
    &#34;&#34;&#34;
    self.checkHubData()
    return self.wiserHubData</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getMACAddress"><code class="name flex">
<span>def <span class="ident">getMACAddress</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getMACAddress(self):
    return self.wiserNetworkData.get(&#34;Station&#34;).get(&#34;MacAddress&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getRoom"><code class="name flex">
<span>def <span class="ident">getRoom</span></span>(<span>self, roomId)</span>
</code></dt>
<dd>
<section class="desc"><p>Convinience to get data on a single room</p>
<p>param roomId: The roomID
return:</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getRoom(self, roomId):
    &#34;&#34;&#34;
    Convinience to get data on a single room

    param roomId: The roomID
    return:
    &#34;&#34;&#34;
    self.checkHubData()
    if self.wiserHubData.get(&#34;Room&#34;) is None:
        _LOGGER.warning(&#34;getRoom called but no rooms found&#34;)
        raise WiserNoRoomsFound(&#34;No rooms found in Wiser payload&#34;)
    for room in (self.wiserHubData.get(&#34;Room&#34;)):
        if room.get(&#34;id&#34;) == roomId:
            return room
    raise WiserNotFound(&#34;Room {} not found&#34;.format(roomId))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getRoomSchedule"><code class="name flex">
<span>def <span class="ident">getRoomSchedule</span></span>(<span>self, roomId)</span>
</code></dt>
<dd>
<section class="desc"><p>Gets Room Schedule Data</p>
<p>param roomId:
return: json data</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getRoomSchedule(self, roomId):
    &#34;&#34;&#34;
    Gets Room Schedule Data
    
    param roomId:
    return: json data
    &#34;&#34;&#34;
    self.checkHubData()

    if self.getRoom(roomId) is None:
        raise WiserNotFound(
            &#34;getRoomSchedule for room {} not found &#34;.format(roomId))

    scheduleId = self.getRoom(roomId).get(&#34;ScheduleId&#34;)
    if scheduleId is not None:
        for schedule in (self.wiserHubData.get(&#34;Schedule&#34;)):
            if schedule.get(&#34;id&#34;) == scheduleId:
                return schedule
        raise WiserNotFound(
            &#34;getRoomSchedule for room {} not found &#34;.format(roomId))
    else:
        raise WiserNotFound(
            &#34;getRoomSchedule for room {} not found &#34;.format(roomId))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getRoomStatData"><code class="name flex">
<span>def <span class="ident">getRoomStatData</span></span>(<span>self, deviceId)</span>
</code></dt>
<dd>
<section class="desc"><p>Gets Room Thermostats Data</p>
<p>param deviceId:
return:</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getRoomStatData(self, deviceId):
    &#34;&#34;&#34;
    Gets Room Thermostats Data

    param deviceId:
    return:
    &#34;&#34;&#34;
    self.checkHubData()

    if self.wiserHubData[&#39;RoomStat&#39;] is None:
        _LOGGER.warning(&#34;getRoomStatData called but no RoomStats found&#34;)
        raise WiserNotFound(&#34;deviceID {} not found &#34;.format(deviceId))

    for roomStat in self.wiserHubData[&#39;RoomStat&#39;]:
        if roomStat.get(&#34;id&#34;) == deviceId:
            return roomStat
    &#34;&#34;&#34;
    If we get here then the deviceId was not found
    &#34;&#34;&#34;
    raise WiserNotFound(
        &#34;getRoomStatData for deviceID {} not found due&#34;.format(deviceId))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getRooms"><code class="name flex">
<span>def <span class="ident">getRooms</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Gets Room Data as JSON Payload</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getRooms(self):
    &#34;&#34;&#34;
    Gets Room Data as JSON Payload
    &#34;&#34;&#34;
    self.checkHubData()
    return self.wiserHubData.get(&#34;Room&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getSmartPlug"><code class="name flex">
<span>def <span class="ident">getSmartPlug</span></span>(<span>self, smartPlugId)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getSmartPlug(self,smartPlugId):
    self.checkHubData()
    if self.getHubData().get(&#34;SmartPlug&#34;) is not None:
        for plug in self.getHubData().get(&#34;SmartPlug&#34;):
            if plug.get(&#34;id&#34;) == smartPlugId:
                return plug
    # If we get here then the plug was not found
    raise WiserNotFound(&#34;Unable to find smartPlug {}&#34;.format(smartPlugId))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getSmartPlugMode"><code class="name flex">
<span>def <span class="ident">getSmartPlugMode</span></span>(<span>self, smartPlugId)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getSmartPlugMode(self, smartPlugId):
    self.checkHubData()
    if self.getHubData().get(&#34;SmartPlug&#34;) is not None:
        for plug in self.getHubData().get(&#34;SmartPlug&#34;):
            if plug.get(&#34;id&#34;) == smartPlugId:
                return plug.get(&#34;Mode&#34;)
    # If we get here then the plug was not found
    raise WiserNotFound(&#34;Unable to find smartPlug {}&#34;.format(smartPlugId))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getSmartPlugState"><code class="name flex">
<span>def <span class="ident">getSmartPlugState</span></span>(<span>self, smartPlugId)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getSmartPlugState(self, smartPlugId):
    self.checkHubData()
    if self.getHubData().get(&#34;SmartPlug&#34;) is not None:
        for plug in self.getHubData().get(&#34;SmartPlug&#34;):
            if plug.get(&#34;id&#34;) == smartPlugId:
                return plug.get(&#34;OutputState&#34;)
    # If we get here then the plug was not found
    raise WiserNotFound(&#34;Unable to find smartPlug {}&#34;.format(smartPlugId))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getSmartPlugs"><code class="name flex">
<span>def <span class="ident">getSmartPlugs</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getSmartPlugs(self):
    self.checkHubData()
    return self.getHubData().get(&#34;SmartPlug&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getSystem"><code class="name flex">
<span>def <span class="ident">getSystem</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Convinience function to get system information</p>
<p>return: JSON with system data</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getSystem(self):
    &#34;&#34;&#34;
    Convinience function to get system information

    return: JSON with system data
    &#34;&#34;&#34;
    self.checkHubData()
    return self.wiserHubData.get(&#34;System&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.getWiserHubName"><code class="name flex">
<span>def <span class="ident">getWiserHubName</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getWiserHubName(self):
    return self.wiserNetworkData.get(&#34;Station&#34;).get(&#34;MdnsHostname&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.refreshData"><code class="name flex">
<span>def <span class="ident">refreshData</span></span>(<span>self)</span>
</code></dt>
<dd>
<section class="desc"><p>Forces a refresh of data from the wiser hub
return: JSON Data</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def refreshData(self):
    &#34;&#34;&#34;
    Forces a refresh of data from the wiser hub
    return: JSON Data
    &#34;&#34;&#34;

    _LOGGER.info(&#34;Updating Wiser Hub Data&#34;)
    try:
        resp = requests.get(WISERHUBURL.format(
            self.hubIP), headers=self.headers, timeout=TIMEOUT)
            
        resp.raise_for_status()
        self.wiserHubData = resp.json()
        
        _LOGGER.debug(
            &#34;Wiser Hub Data received {} &#34;.format(self.wiserHubData))
        if self.getRooms() is not None:
            for room in self.getRooms():
                roomStatId = room.get(&#34;RoomStatId&#34;)
                if roomStatId is not None:
                    # RoomStat found add it to the list
                    self.device2roomMap[roomStatId] = {
                        &#34;roomId&#34;: room.get(&#34;id&#34;),
                        &#34;roomName&#34;: room.get(&#34;Name&#34;)}
                smartValves = room.get(&#34;SmartValveIds&#34;)
                if smartValves is not None:
                    for valveId in smartValves:
                        self.device2roomMap[valveId] = {
                            &#34;roomId&#34;: room.get(&#34;id&#34;),
                            &#34;roomName&#34;: room.get(&#34;Name&#34;)}
                # Show warning if room contains no devices.
                if roomStatId is None and smartValves is None:
                    # No devices in room
                    _LOGGER.warning(
                        &#34;Room {} doesn&#39;t contain any smart valves or thermostats.&#34;.format(
                            room.get(&#34;Name&#34;)))
            _LOGGER.debug(&#34; valve2roomMap{} &#34;.format(self.device2roomMap))
        else:
            _LOGGER.warning(&#34;Wiser found no rooms&#34;)

        # The Wiser Heat Hub can return invalid JSON, so remove all non-printable characters before trying to parse JSON
        responseContent = requests.get(WISERNETWORKURL.format(self.hubIP), headers=self.headers, timeout=TIMEOUT).content
        responseContent = re.sub(rb&#39;[^\x20-\x7F]+&#39;, b&#39;&#39;, responseContent)
        self.WiserNetworkData = json.loads(responseContent)

    except requests.Timeout:
        _LOGGER.debug(
            &#34;Connection timed out trying to update from Wiser Hub&#34;)
        raise WiserHubTimeoutException(&#34;The connection timed out.&#34;)
    except requests.HTTPError:
        if self.wiserHubData.status_code == 401:
            raise WiserHubAuthenticationException(&#34;Authentication error.  Check secret key.&#34;)
        elif self.wiserHubData.status_code == 404:
            raise WiserRESTException(&#34;Not Found.&#34;)
        else:
            raise WiserRESTException(&#34;Unknown Error.&#34;)
    except requests.ConnectionError:
        _LOGGER.debug(&#34;Connection error trying to update from Wiser Hub&#34;)
    return self.wiserHubData</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.setHomeAwayMode"><code class="name flex">
<span>def <span class="ident">setHomeAwayMode</span></span>(<span>self, mode, temperature=10)</span>
</code></dt>
<dd>
<section class="desc"><p>Sets default Home or Away mode, optionally allows you to set a temperature for away mode</p>
<p>param mode: HOME
| AWAY</p>
<p>param temperature: Temperature between 5-30C or -20 for OFF</p>
<p>return:</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setHomeAwayMode(self, mode, temperature=10):
    &#34;&#34;&#34;
    Sets default Home or Away mode, optionally allows you to set a temperature for away mode

    param mode: HOME   | AWAY

    param temperature: Temperature between 5-30C or -20 for OFF

    return:
    &#34;&#34;&#34;
    _LOGGER.info(
        &#34;Setting Home/Away mode to : {} {} C&#34;.format(mode, temperature))


    if mode not in [&#39;HOME&#39;, &#39;AWAY&#39;]:
        raise ValueError(&#34;setAwayHome can only be HOME or AWAY&#34;)

    if mode == &#34;AWAY&#34;:
        if temperature is None:
            raise ValueError(
                &#34;setAwayHome set to AWAY but not temperature set&#34;)
        if not (self.__checkTempRange(temperature)):
            raise ValueError(
                &#34;setAwayHome temperature can only be between {} and {} or {}(Off)&#34;.format(
                    TEMP_MINIMUM, TEMP_MAXIMUM, TEMP_OFF))
    _LOGGER.info(&#34;Setting Home/Away : {}&#34;.format(mode))

    if mode == &#34;AWAY&#34;:
        patchData = {&#34;type&#34;: 2,
                          &#34;setPoint&#34;: self.__toWiserTemp(temperature)}
    else:
        patchData = {&#34;type&#34;: 0, &#34;setPoint&#34;: 0}
    _LOGGER.debug(&#34;patchdata {} &#34;.format(patchData))
    response = requests.patch(url=WISERMODEURL.format(self.hubIP),
                                   headers=self.headers,
                                   json=patchData, timeout=TIMEOUT)
    if response.status_code != 200:
        _LOGGER.debug(&#34;Set Home/Away Response code = {}&#34;.format(
            response.status_code))
        raise ValueError(&#34;Error setting Home/Away , error {} {}&#34;.format(
            response.status_code, response.text))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.setHotwaterMode"><code class="name flex">
<span>def <span class="ident">setHotwaterMode</span></span>(<span>self, mode)</span>
</code></dt>
<dd>
<section class="desc"><p>Switch Hot Water on or off manually, or reset to 'Auto' (schedule).
'mode' can be "on", "off" or "auto".</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setHotwaterMode(self, mode):
    &#34;&#34;&#34;
      Switch Hot Water on or off manually, or reset to &#39;Auto&#39; (schedule).
      &#39;mode&#39; can be &#34;on&#34;, &#34;off&#34; or &#34;auto&#34;.
    &#34;&#34;&#34;

    # Wiser requires a temperature when patching the Hot Water state,
    # reflecting &#39;on&#39; or &#39;off&#39;
    DHWOnTemp = 1100
    DHWOffTemp = -200

    modeMapping = {
        &#39;on&#39;: {
            &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;, &#34;SetPoint&#34;: DHWOnTemp}},
        &#39;off&#39;: {
            &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;, &#34;SetPoint&#34;: DHWOffTemp}},
        &#39;auto&#39;: {&#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;None&#34;, &#34;Mode&#34;: &#34;Auto&#34;}},
    }

    _mode = mode.lower()
    if _mode not in [&#39;on&#39;, &#39;off&#39;, &#39;auto&#39;]:
        raise ValueError(
            &#34;Hot Water can be either &#39;on&#39;, &#39;off&#39; or &#39;auto&#39; - not &#39;%s&#39;&#34; % _mode)

    # Obtain our DHW control ID
    if self.wiserHubData is None:
        self.refreshData()
    DHWId = self.wiserHubData.get(&#34;HotWater&#34;)[0].get(&#34;id&#34;)

    _url = WISERHUBURL.format(self.hubIP) + &#34;/HotWater/{}/&#34;.format(DHWId)
    _LOGGER.debug(&#34;Sending Patch Data: {}, to URL [{}]&#34;.format(
        modeMapping.get(_mode), _url))
    response = requests.patch(url=_url, headers=self.headers,
                                   json=modeMapping.get(_mode))
    if response.status_code != 200:
        _LOGGER.debug(
            &#34;Set DHW Response code = {}&#34;.format(response.status_code))
        raise WiserRESTException(
            &#34;Error setting hot water mode to {}, error {} {}&#34;.
                format(_mode, response.status_code, response.text))

    return True</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.setRoomMode"><code class="name flex">
<span>def <span class="ident">setRoomMode</span></span>(<span>self, roomId, mode, boost_temp=20, boost_temp_time=30)</span>
</code></dt>
<dd>
<section class="desc"><p>Set the Room Mode, this can be Auto, Manual, off or Boost. When you set the mode back to Auto it will automatically take the scheduled temperature</p>
<p>param roomId: RoomId</p>
<p>param mode:
Mode (auto, manual off, or boost)</p>
<p>param boost_temp:
If boosting enter the temperature here in C, can be between 5-30</p>
<p>param boost_temp_time:
How long to boost for in minutes</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setRoomMode(self, roomId, mode, boost_temp=20, boost_temp_time=30):
    &#34;&#34;&#34;
    Set the Room Mode, this can be Auto, Manual, off or Boost. When you set the mode back to Auto it will automatically take the scheduled temperature

    param roomId: RoomId

    param mode:  Mode (auto, manual off, or boost)

    param boost_temp:  If boosting enter the temperature here in C, can be between 5-30

    param boost_temp_time:  How long to boost for in minutes

    &#34;&#34;&#34;
    # TODO
    _LOGGER.debug(&#34;Set Mode {} for a room {} &#34;.format(mode, roomId))
    if mode.lower() == &#34;auto&#34;:
        # Do Auto
        patchData = {&#34;Mode&#34;: &#34;Auto&#34;}
    elif mode.lower() == &#34;boost&#34;:
        if boost_temp &lt; TEMP_MINIMUM or boost_temp &gt; TEMP_MAXIMUM:
            raise ValueError(
                &#34;Boost temperature is set to {}. Boost temperature can only be between {} and {}.&#34;.format(
                    boost_temp, TEMP_MINIMUM, TEMP_MAXIMUM))
        _LOGGER.debug(
            &#34;Setting room {} to boost mode with temp of {} for {} mins&#34;.format(
                roomId, boost_temp, boost_temp_time))
        patchData = {&#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                         &#34;DurationMinutes&#34;: boost_temp_time,
                                         &#34;SetPoint&#34;: self.__toWiserTemp(
                                             boost_temp),
                                         &#34;Originator&#34;: &#34;App&#34;}}
    elif mode.lower() == &#34;manual&#34;:
        # When setting to manual , set the temp to the current scheduled temp 
        setTemp = self.__fromWiserTemp(
            self.getRoom(roomId).get(&#34;ScheduledSetPoint&#34;))
        # If current scheduled temp is less than 5C then set to min temp
        setTemp = setTemp if setTemp &gt;= TEMP_MINIMUM else TEMP_MINIMUM
        patchData = {&#34;Mode&#34;: &#34;Manual&#34;,
                     &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                         &#34;SetPoint&#34;: self.__toWiserTemp(
                                             setTemp)}}
    # Implement trv off as per https://github.com/asantaga/wiserheatingapi/issues/3
    elif mode.lower() == &#34;off&#34;:
        patchData = {&#34;Mode&#34;: &#34;Manual&#34;,
                     &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                         &#34;SetPoint&#34;: self.__toWiserTemp(
                                             TEMP_OFF)}}
    else:
        raise ValueError(
            &#34;Error setting setting room mode, received  {} but should be auto,boost,off or manual &#34;.format(
                mode))

    # if not a boost operation cancel any current boost
    if mode.lower() != &#34;boost&#34;:
        cancelBoostPostData = {
            &#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;None&#34;, &#34;DurationMinutes&#34;: 0,
                                &#34;SetPoint&#34;: 0, &#34;Originator&#34;: &#34;App&#34;}}

        response = requests.patch(
            WISERROOM.format(self.hubIP, roomId), headers=self.headers,
            json=cancelBoostPostData, timeout=TIMEOUT)
        if response.status_code != 200:
            _LOGGER.error(&#34;Cancelling boost resulted in {}&#34;.format(
                response.status_code))
            raise WiserRESTException(
                &#34;Error cancelling boost {} &#34;.format(mode))

    # Set new mode
    response = requests.patch(WISERROOM.format(
        self.hubIP, roomId), headers=self.headers, json=patchData,
        timeout=TIMEOUT)
    if response.status_code != 200:
        _LOGGER.error(
            &#34;Set Room {} to Mode {} resulted in {}&#34;.format(roomId, mode,
                                                           response.status_code))
        raise WiserRESTException(
            &#34;Error setting mode to {}, error {} &#34;.format(mode,
                                                         response.text))
    _LOGGER.debug(
        &#34;Set room mode, error {} ({})&#34;.format(response.status_code,
                                              response.text))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.setRoomSchedule"><code class="name flex">
<span>def <span class="ident">setRoomSchedule</span></span>(<span>self, roomId, scheduleData)</span>
</code></dt>
<dd>
<section class="desc"><p>Sets Room Schedule</p>
<p>param roomId:
param scheduleData: json data for schedule
return:</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setRoomSchedule(self, roomId, scheduleData: dict):
    &#34;&#34;&#34;
    Sets Room Schedule

    param roomId:
    param scheduleData: json data for schedule
    return:
    &#34;&#34;&#34;
    scheduleId = self.getRoom(roomId).get(&#34;ScheduleId&#34;)

    if scheduleId is not None:
        patchData = scheduleData
        response = requests.patch(
            url=WISERSCHEDULEURL.format(self.hubIP, scheduleId),
            headers=self.headers, json=patchData, timeout=TIMEOUT)

        if response.status_code != 200:
            _LOGGER.debug(&#34;Set Schedule Response code = {}&#34;.format(
                response.status_code))
            raise WiserRESTException(
                &#34;Error setting schedule for room {} , error {} {}&#34;.format(
                    roomId, response.status_code, response.text))
    else:
        raise WiserNotFound(&#34;No schedule found that matches roomId&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.setRoomScheduleFromFile"><code class="name flex">
<span>def <span class="ident">setRoomScheduleFromFile</span></span>(<span>self, roomId, scheduleFile)</span>
</code></dt>
<dd>
<section class="desc"><p>Sets Room Schedule</p>
<p>param roomId:
param scheduleData: json data for schedule
return:</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setRoomScheduleFromFile(self, roomId, scheduleFile: str):
    &#34;&#34;&#34;
    Sets Room Schedule

    param roomId:
    param scheduleData: json data for schedule
    return:
    &#34;&#34;&#34;
    scheduleId = self.getRoom(roomId).get(&#34;ScheduleId&#34;)


    if scheduleId is not None:
        if os.path.exists(scheduleFile):
            try:
                with open(scheduleFile, &#39;r&#39;) as f:
                    scheduleData = json.load(f)
            except:
                raise Exception(
                    &#34;Error reading file {}&#34;.format(scheduleFile))

            patchData = scheduleData
            response = requests.patch(
                url=WISERSCHEDULEURL.format(self.hubIP, scheduleId),
                headers=self.headers, json=patchData, timeout=TIMEOUT)

            if response.status_code != 200:
                _LOGGER.debug(&#34;Set Schedule Response code = {}&#34;.format(
                    response.status_code))
                raise WiserRESTException(
                    &#34;Error setting schedule for room {} , error {} {}&#34;.format(
                        roomId, response.status_code,
                        response.text))
        else:
            raise FileNotFoundError(&#34;Schedule file, {}, not found.&#34;.format(
                os.path.abspath(scheduleFile)))
    else:
        raise WiserNotFound(&#34;No schedule found that matches roomId&#34;)</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.setRoomTemperature"><code class="name flex">
<span>def <span class="ident">setRoomTemperature</span></span>(<span>self, roomId, temperature)</span>
</code></dt>
<dd>
<section class="desc"><p>Sets the room temperature
param roomId:
The Room ID
param temperature:
The temperature in celcius from 5 to 30, -20 for Off</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setRoomTemperature(self, roomId, temperature):
    &#34;&#34;&#34;
    Sets the room temperature
    param roomId:  The Room ID
    param temperature:  The temperature in celcius from 5 to 30, -20 for Off
    &#34;&#34;&#34;
    _LOGGER.info(
        &#34;Set Room {} Temperature to = {} &#34;.format(roomId, temperature))
    if not (self.__checkTempRange(temperature)):
        raise ValueError(
            &#34;SetRoomTemperature : value of temperature must be between {} and {} OR {} (off)&#34;.format(
                TEMP_MINIMUM, TEMP_MAXIMUM, TEMP_OFF))
    patchData = {&#34;RequestOverride&#34;: {&#34;Type&#34;: &#34;Manual&#34;,
                                     &#34;SetPoint&#34;: self.__toWiserTemp(
                                         temperature)}}
    response = requests.patch(WISERSETROOMTEMP.format(
        self.hubIP, roomId), headers=self.headers, json=patchData,
        timeout=TIMEOUT)
    if response.status_code != 200:
        _LOGGER.error(
            &#34;Set Room {} Temperature to = {} resulted in {}&#34;.format(roomId,
                                                                    temperature,
                                                                    response.status_code))
        raise WiserRESTException(
            &#34;Error setting temperature, error {} &#34;.format(
                response.text))
    _LOGGER.debug(
        &#34;Set room Temp, error {} ({})&#34;.format(response.status_code,
                                              response.text))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.setSmartPlugMode"><code class="name flex">
<span>def <span class="ident">setSmartPlugMode</span></span>(<span>self, smartPlugId, smartPlugMode)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setSmartPlugMode(self, smartPlugId, smartPlugMode):

    if smartPlugMode.title() not in [&#34;Auto&#34;, &#34;Manual&#34;]:
        _LOGGER.error(&#34;SmartPlug Mode must be either Auto or Manual&#34;)
        raise ValueError(&#34;SmartPlug Mode must be either Auto or Manual&#34;)

    url = WISERSMARTPLUGURL.format(self.hubIP, smartPlugId)
    patchData = {&#34;Mode&#34;: smartPlugMode.title()}

    _LOGGER.debug(
        &#34;Setting smartplug status patchdata {} &#34;.format(patchData))
    response = requests.patch(url=url.format(self.hubIP),
                              headers=self.headers,
                              json=patchData,
                              timeout=TIMEOUT)
    if response.status_code != 200:
        if response.status_code == 404:
            _LOGGER.debug(&#34;Set smart plug not found error &#34;)
            raise WiserNotFound(
                &#34;Set smart plug {} not found error&#34;.format(smartPlugId))
        else:
            _LOGGER.debug(
                &#34;Set smart plug error {} Response code = {}&#34;.format(
                    response.text, response.status_code))
            raise WiserRESTException(
                &#34;Error setting smartplug mode, msg {} , error {}&#34;.format(
                    response.status_code,
                    response.text))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.setSmartPlugState"><code class="name flex">
<span>def <span class="ident">setSmartPlugState</span></span>(<span>self, smartPlugId, smartPlugState)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setSmartPlugState(self, smartPlugId, smartPlugState):

    if smartPlugState.title() not in [&#34;On&#34;, &#34;Off&#34;]:
        _LOGGER.error(&#34;SmartPlug State must be either On or Off&#34;)
        raise ValueError(&#34;SmartPlug State must be either On or Off&#34;)

    url = WISERSMARTPLUGURL.format(self.hubIP, smartPlugId)
    patchData = {&#34;RequestOutput&#34;: smartPlugState.title()}

    _LOGGER.debug(
        &#34;Setting smartplug status patchdata {} &#34;.format(patchData))
    response = requests.patch(url=url.format(self.hubIP),
                              headers=self.headers,
                              json=patchData,
                              timeout=TIMEOUT)
    if response.status_code != 200:
        if response.status_code == 404:
            _LOGGER.debug(&#34;Set smart plug not found error &#34;)
            raise WiserNotFound(
                &#34;Set smart plug {} not found error&#34;.format(smartPlugId))
        else:
            _LOGGER.debug(
                &#34;Set smart plug error {} Response code = {}&#34;.format(
                    response.text, response.status_code))
            raise WiserRESTException(
                &#34;Error setting smartplug mode, msg {} , error {}&#34;.format(
                    response.status_code,
                    response.text))</code></pre>
</details>
</dd>
<dt id="wiserHeatingAPI.wiserHub.wiserHub.setSystemSwitch"><code class="name flex">
<span>def <span class="ident">setSystemSwitch</span></span>(<span>self, switch, mode=False)</span>
</code></dt>
<dd>
<section class="desc"><p>Sets a system switch. For details of which switches to set look at the System section of the payload from the wiserhub
:param switch: Name of Switch
:param mode: Value of mode
:return:</p></section>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def setSystemSwitch(self, switch, mode=False):
    &#34;&#34;&#34;
    Sets a system switch. For details of which switches to set look at the System section of the payload from the wiserhub
    :param switch: Name of Switch
    :param mode: Value of mode
    :return:
    &#34;&#34;&#34;
    patchData = {switch: mode}
    url = WISERHUBURL + &#34;System&#34;

    _LOGGER.debug(&#34;patchdata {} &#34;.format(patchData))
    response = requests.patch(url=url.format(self.hubIP),
                                   headers=self.headers,
                                   json=patchData, timeout=TIMEOUT)
    if response.status_code != 200:
        _LOGGER.debug(&#34;Set {} Response code = {}&#34;.format(switch,
                                                         response.status_code))
        raise WiserRESTException(
            &#34;Error setting {} , error {} {}&#34;.format(switch,
                                                    response.status_code,
                                                    response.text))</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#wiser-api-facade">Wiser API Facade</a></li>
</ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="wiserHeatingAPI" href="index.html">wiserHeatingAPI</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="wiserHeatingAPI.wiserHub.Error" href="#wiserHeatingAPI.wiserHub.Error">Error</a></code></h4>
</li>
<li>
<h4><code><a title="wiserHeatingAPI.wiserHub.WiserHubAuthenticationException" href="#wiserHeatingAPI.wiserHub.WiserHubAuthenticationException">WiserHubAuthenticationException</a></code></h4>
</li>
<li>
<h4><code><a title="wiserHeatingAPI.wiserHub.WiserHubDataNull" href="#wiserHeatingAPI.wiserHub.WiserHubDataNull">WiserHubDataNull</a></code></h4>
</li>
<li>
<h4><code><a title="wiserHeatingAPI.wiserHub.WiserHubTimeoutException" href="#wiserHeatingAPI.wiserHub.WiserHubTimeoutException">WiserHubTimeoutException</a></code></h4>
</li>
<li>
<h4><code><a title="wiserHeatingAPI.wiserHub.WiserNoDevicesFound" href="#wiserHeatingAPI.wiserHub.WiserNoDevicesFound">WiserNoDevicesFound</a></code></h4>
</li>
<li>
<h4><code><a title="wiserHeatingAPI.wiserHub.WiserNoHeatingFound" href="#wiserHeatingAPI.wiserHub.WiserNoHeatingFound">WiserNoHeatingFound</a></code></h4>
</li>
<li>
<h4><code><a title="wiserHeatingAPI.wiserHub.WiserNoHotWaterFound" href="#wiserHeatingAPI.wiserHub.WiserNoHotWaterFound">WiserNoHotWaterFound</a></code></h4>
</li>
<li>
<h4><code><a title="wiserHeatingAPI.wiserHub.WiserNoRoomsFound" href="#wiserHeatingAPI.wiserHub.WiserNoRoomsFound">WiserNoRoomsFound</a></code></h4>
</li>
<li>
<h4><code><a title="wiserHeatingAPI.wiserHub.WiserNotFound" href="#wiserHeatingAPI.wiserHub.WiserNotFound">WiserNotFound</a></code></h4>
</li>
<li>
<h4><code><a title="wiserHeatingAPI.wiserHub.WiserRESTException" href="#wiserHeatingAPI.wiserHub.WiserRESTException">WiserRESTException</a></code></h4>
</li>
<li>
<h4><code><a title="wiserHeatingAPI.wiserHub.wiserHub" href="#wiserHeatingAPI.wiserHub.wiserHub">wiserHub</a></code></h4>
<ul class="">
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.checkHubData" href="#wiserHeatingAPI.wiserHub.wiserHub.checkHubData">checkHubData</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.copyRoomSchedule" href="#wiserHeatingAPI.wiserHub.wiserHub.copyRoomSchedule">copyRoomSchedule</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getDevice" href="#wiserHeatingAPI.wiserHub.wiserHub.getDevice">getDevice</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getDeviceRoom" href="#wiserHeatingAPI.wiserHub.wiserHub.getDeviceRoom">getDeviceRoom</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getDevices" href="#wiserHeatingAPI.wiserHub.wiserHub.getDevices">getDevices</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getHeatingChannels" href="#wiserHeatingAPI.wiserHub.wiserHub.getHeatingChannels">getHeatingChannels</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getHeatingRelayStatus" href="#wiserHeatingAPI.wiserHub.wiserHub.getHeatingRelayStatus">getHeatingRelayStatus</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getHotwater" href="#wiserHeatingAPI.wiserHub.wiserHub.getHotwater">getHotwater</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getHotwaterRelayStatus" href="#wiserHeatingAPI.wiserHub.wiserHub.getHotwaterRelayStatus">getHotwaterRelayStatus</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getHubData" href="#wiserHeatingAPI.wiserHub.wiserHub.getHubData">getHubData</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getMACAddress" href="#wiserHeatingAPI.wiserHub.wiserHub.getMACAddress">getMACAddress</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getRoom" href="#wiserHeatingAPI.wiserHub.wiserHub.getRoom">getRoom</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getRoomSchedule" href="#wiserHeatingAPI.wiserHub.wiserHub.getRoomSchedule">getRoomSchedule</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getRoomStatData" href="#wiserHeatingAPI.wiserHub.wiserHub.getRoomStatData">getRoomStatData</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getRooms" href="#wiserHeatingAPI.wiserHub.wiserHub.getRooms">getRooms</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getSmartPlug" href="#wiserHeatingAPI.wiserHub.wiserHub.getSmartPlug">getSmartPlug</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getSmartPlugMode" href="#wiserHeatingAPI.wiserHub.wiserHub.getSmartPlugMode">getSmartPlugMode</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getSmartPlugState" href="#wiserHeatingAPI.wiserHub.wiserHub.getSmartPlugState">getSmartPlugState</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getSmartPlugs" href="#wiserHeatingAPI.wiserHub.wiserHub.getSmartPlugs">getSmartPlugs</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getSystem" href="#wiserHeatingAPI.wiserHub.wiserHub.getSystem">getSystem</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.getWiserHubName" href="#wiserHeatingAPI.wiserHub.wiserHub.getWiserHubName">getWiserHubName</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.refreshData" href="#wiserHeatingAPI.wiserHub.wiserHub.refreshData">refreshData</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.setHomeAwayMode" href="#wiserHeatingAPI.wiserHub.wiserHub.setHomeAwayMode">setHomeAwayMode</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.setHotwaterMode" href="#wiserHeatingAPI.wiserHub.wiserHub.setHotwaterMode">setHotwaterMode</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.setRoomMode" href="#wiserHeatingAPI.wiserHub.wiserHub.setRoomMode">setRoomMode</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.setRoomSchedule" href="#wiserHeatingAPI.wiserHub.wiserHub.setRoomSchedule">setRoomSchedule</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.setRoomScheduleFromFile" href="#wiserHeatingAPI.wiserHub.wiserHub.setRoomScheduleFromFile">setRoomScheduleFromFile</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.setRoomTemperature" href="#wiserHeatingAPI.wiserHub.wiserHub.setRoomTemperature">setRoomTemperature</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.setSmartPlugMode" href="#wiserHeatingAPI.wiserHub.wiserHub.setSmartPlugMode">setSmartPlugMode</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.setSmartPlugState" href="#wiserHeatingAPI.wiserHub.wiserHub.setSmartPlugState">setSmartPlugState</a></code></li>
<li><code><a title="wiserHeatingAPI.wiserHub.wiserHub.setSystemSwitch" href="#wiserHeatingAPI.wiserHub.wiserHub.setSystemSwitch">setSystemSwitch</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.5</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>